
<!DOCTYPE html>
<html lang="zh-Hans">
    <head>
        <meta charset="utf-8" />
        <title>å¯†ç å­¦â€”â€”JWTä»‹ç»ä¸å…¶å®‰å…¨é—®é¢˜ | å°Câ™¥å¤©å¤©</title>
        <meta name="author" content="å°C&å¤©å¤©" />
        <meta name="description" content="^v^" />
        <meta name="keywords" content="" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <link rel="icon" href="/images/icon.jpg" />
        <link rel="preconnect" href="https://cdn.staticfile.org" />
<script src="https://cdn.staticfile.org/vue/3.3.4/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.4.0/css/all.min.css" />
<link rel="preconnect" href="https://fonts.loli.net" />
<link rel="preconnect" href="https://gstatic.loli.net" crossorigin />
<link rel="stylesheet" href="https://fonts.loli.net/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap" />
<script> const mixins = {}; </script>

<!-- å…¼å®¹ä¸åŒç‰ˆæœ¬çš„æµè§ˆå™¨ -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>


<!-- é«˜äº®ä»£ç  -->
<script src="https://cdn.staticfile.org/highlight.js/11.8.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.org/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/11.8.0/styles/github.min.css"/>
<script src="/js/lib/highlight.js"></script>


<!-- ä½¿ç”¨ KaTeX æ¸²æŸ“æ•°å­¦å…¬å¼ -->
<script src="https://cdn.staticfile.org/KaTeX/0.16.8/katex.min.js"></script>
<script src="https://cdn.staticfile.org/KaTeX/0.16.8/contrib/auto-render.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.16.8/katex.min.css" />
<script src="/js/lib/math.js"></script>


<!-- ç®€å•çš„ç‚¹å‡»å›¾ç‰‡æ”¾å¤§ç¼©å°çš„é¢„è§ˆ -->
<script src="/js/lib/preview.js"></script>


<!-- çœ‹æ¿å¨˜ -->
<script src="https://cdn.staticfile.org/pixi.js/4.6.1/pixi.min.js"></script>


<!-- ä¾§è¾¹å°åŠŸèƒ½-->



<!-- è¯„è®ºè®¾ç½® -->

<script
    src="https://giscus.app/client.js"
    data-repo="A7cc/giscus-comments"
    data-repo-id="R_kgDOKKSvfw"
    data-category="Announcements"
    data-category-id="DIC_kwDOKKSvf84CYyp2"
    data-mapping="pathname"
    data-strict="1"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="https://static-argvchs.netlify.app/css/giscus.css"
    data-lang="zh-CN"
    crossorigin
    async
></script>



<script src="https://cdn.bootcdn.net/ajax/libs/animejs/3.2.1/anime.min.js"></script>
<link rel="stylesheet" href="/css/main.css" />

    <meta name="generator" content="Hexo 6.2.0"></head>
    <body>
        <div id="layout">
            <!-- é¡µé¢åŠ è½½ -->
            <transition name="fade">
                <div id="loading" v-show="loading">
                    <div id="loading-circle">
                        <h2>LOADING</h2>
                        <p>æ­£åœ¨åŠ è½½</p>
                        <img src="/images/afde9fa65a5742a90b51d6e1211e841e.gif" />
                    </div>
                </div>
            </transition>
            <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>å°Câ™¥å¤©å¤©</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;ä¸»é¡µ</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;å…³äº</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;æ–‡ç« </span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;åˆ†ç±»</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;æ ‡ç­¾</span>
        </a>
        
        <a href="/tools">
            <i class="fa-solid fa-tools fa-fw"></i>
            <span>&ensp;å·¥å…·</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;å°Câ™¥å¤©å¤©</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">ä¸»é¡µ</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">å…³äº</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">æ–‡ç« </div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">åˆ†ç±»</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">æ ‡ç­¾</div>
                    </div>
                </a>
                
                <a href="/tools">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tools fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">å·¥å…·</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

            <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
                <div id="article-posts-wrap" true ref="homePostsWrap">
    <div class="article">
        <div>
            <h1>å¯†ç å­¦â€”â€”JWTä»‹ç»ä¸å…¶å®‰å…¨é—®é¢˜</h1>
        </div>
        <div class="info">
            <span class="date">
                <span class="icon">
                    <i class="fa-solid fa-calendar fa-fw"></i>
                </span>
                2023/3/14
            </span>
            
            <span class="category">
                <a href="/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/">
                    <span class="icon">
                        <i class="fa-solid fa-bookmark fa-fw"></i>
                    </span>
                    å¯†ç å­¦
                </a>
            </span>
            
            
            <span class="tags">
                <span class="icon">
                    <i class="fa-solid fa-tags fa-fw"></i>
                </span>
                
                
                <span class="tag">
                    
                    <a href="/tags/JWT/" style="color: #ff7d73">JWT</a>
                </span>
                
                <span class="tag">
                    
                    <a href="/tags/%E8%AE%A4%E8%AF%81%E7%AD%BE%E5%90%8D/" style="color: #03a9f4">è®¤è¯ç­¾å</a>
                </span>
                
            </span>
            
        </div>
        
        <div class="content" v-pre>
            <h1 id="å£¹-ä»‹ç»"><a href="#å£¹-ä»‹ç»" class="headerlink" title="å£¹ ä»‹ç»"></a>å£¹ ä»‹ç»</h1><blockquote>
<p>å‰äº›å¤©ï¼Œè¢«é—®åˆ°<code>JWT</code>çš„ç›¸å…³é—®é¢˜ï¼ŒåŸæœ¬ä»¥ä¸ºè‡ªå·±äº†è§£ï¼Œä½†æ˜¯åæ¥å‘ç°åªæ˜¯æµ…æµ…çš„è®¤è¯†ï¼Œè¿™å‡ å¤©ç ”ç©¶äº†ä¸€ä¸‹ï¼Œå…¶åŸºæœ¬çš„å®‰å…¨é—®é¢˜å’Œä»‹ç»ï¼Œä¸‹é¢å°±æ˜¯è‡ªå·±å¯¹<code>JWT</code>çš„è§è§£ï¼</p>
</blockquote>
<p><code>JWT</code>åˆå«ï¼ˆ<code>Json Web Token</code>ï¼‰ï¼Œä¸­æ–‡ç¿»è¯‘åˆå«<code>json</code>æ ¼å¼çš„äº’è”ç½‘ä»¤ç‰Œï¼Œæ˜¯ä¸€ç§å¼€æ”¾çš„æ ‡å‡†ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§ç´§å‡‘ä¸”ç‹¬ç«‹çš„æ–¹å¼ï¼Œç”¨äºåœ¨å„æ–¹ä¹‹é—´ä»¥ <code>JSON</code> å¯¹è±¡çš„å½¢å¼å®‰å…¨åœ°ä¼ è¾“ä¿¡æ¯ã€‚æ­¤ä¿¡æ¯å¯ä»¥éªŒè¯å’Œä¿¡ä»»ï¼Œå› ä¸ºå®ƒæ˜¯ç»è¿‡æ•°å­—ç­¾åçš„ã€‚<code>JWT</code> å¯ä»¥ä½¿ç”¨å¯†é’¥ï¼ˆä½¿ç”¨ <code>HMAC</code> ç®—æ³•ï¼‰æˆ–ä½¿ç”¨ <code>RSA</code> æˆ– <code>ECDSA</code> çš„å…¬é’¥&#x2F;ç§é’¥å¯¹è¿›è¡Œç­¾åï¼ˆè¿™é‡Œæ˜¯ç™¾åº¦çš„ï¼‰ã€‚è¯´ç™½äº†ï¼Œè¿™ä¸œè¥¿å°±æ˜¯ä¸€ä¸ªç”¨æ¥æ ¡éªŒçš„ä¿¡æ¯çš„å‡†ç¡®æ€§çš„ï¼Œç±»ä¼¼äº<code>Session</code>ã€‚</p>
<span id="more"></span>
<blockquote>
<p>é—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆç”¨<code>JWT</code>è€Œä¸ç”¨<code>Session</code>å‘¢ï¼Ÿ</p>
<ul>
<li>æ¯ä¸ªç”¨æˆ·åœ¨è®¤è¯ç™»å½•ä¹‹åï¼ŒæœåŠ¡ç«¯éƒ½ä¼šåœ¨å†…å­˜é‡Œåšä¸€æ¬¡å…³äºè¯¥ç”¨æˆ·<code>Session</code>è®¤è¯çš„è®°å½•ï¼Œå½“è®¤è¯ç”¨æˆ·å¢å¤šæ—¶ï¼Œå°±ä¼šå¯¼è‡´æœåŠ¡ç«¯çš„å¼€é”€ä¼šæ˜æ˜¾å¢å¤§</li>
<li>å¦‚æœè®¤è¯åï¼Œé‚£ä¹ˆè¯¥ç”¨æˆ·<code>Session</code>è®¤è¯çš„è®°å½•å°±ä¼šåœ¨è¯¥æœåŠ¡å™¨å†…ä¿å­˜ï¼Œè€Œå¦‚æœä½¿ç”¨åˆ†å¸ƒå¼çš„åº”ç”¨æ—¶ï¼Œæ¯æ¬¡éƒ½è¦æ¥è¿™å°æœåŠ¡å™¨æˆæƒä¸€æ¬¡ï¼Œæ‰èƒ½è®¿é—®å…¶ä»–èµ„æºï¼Œè¿™æ ·ä¼šå¤§å¤§é™åˆ¶äº†è´Ÿè½½å‡è¡¡å™¨çš„èƒ½åŠ›</li>
</ul>
</blockquote>
<p><code>JWT</code>çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>å…¶æ•°æ®é‡è¾ƒå°ï¼Œä¼ è¾“å¿«ï¼Œå¹¶ä¸”æ˜¯ä»¥<code>JSON</code>åŠ å¯†å½¢å¼ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„ï¼Œæ‰€ä»¥<code>JWT</code>æ˜¯è·¨è¯­è¨€çš„ï¼Œè€Œä¸åƒ<code>Session</code>æ˜¯å°†ç”¨æˆ·ç™»å½•ä¿¡æ¯ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯çš„</li>
<li>ä½¿ç”¨<code>Session</code>è¿›è¡Œèº«ä»½è®¤è¯çš„è¯ï¼Œç”±äº<code>cookie</code>æ— æ³•è·¨åŸŸï¼Œéš¾ä»¥å®ç°å•ç‚¹ç™»å½•ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨<code>token</code>è¿›è¡Œè®¤è¯çš„è¯ï¼Œ<code>token</code>å¯ä»¥è¢«ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„ä»»æ„ä½ç½®çš„å†…å­˜ä¸­ï¼Œä¸ä¸€å®šæ˜¯<code>cookie</code>ï¼Œæ‰€ä»¥ä¸ä¾èµ–<code>cookie</code>ï¼Œä¸ä¼šå­˜åœ¨è¿™äº›é—®é¢˜</li>
<li>ä¸ºäº†é˜²æ­¢å®¢æˆ·ç«¯çš„æ•°æ®é€ å‡ï¼Œä¿å­˜åœ¨å®¢æˆ·ç«¯çš„ç™»å½•ä¿¡æ¯ç»è¿‡äº†ç­¾åå¤„ç†ï¼Œè€Œç­¾åçš„å¯†é’¥åªæœ‰æœåŠ¡å™¨ç«¯æ‰çŸ¥é“ï¼Œæ¯æ¬¡æœåŠ¡å™¨ç«¯æ”¶åˆ°å®¢æˆ·ç«¯æäº¤çš„ç™»å½•ä¿¡æ¯çš„æ—¶å€™éƒ½è¦æ£€æŸ¥ä¸€ä¸‹ç­¾åï¼Œå¦‚æœå‘ç°æ•°æ®è¢«ç¯¡æ”¹ï¼Œåˆ™æ‹’ç»æ¥æ”¶å®¢æˆ·ç«¯æäº¤çš„ä»¤ç‰Œã€‚è¿™æ ·æ—¢ä¿è¯äº†ä¸€å®šçš„å®‰å…¨æ€§ï¼Œåˆå‡å°‘äº†æœåŠ¡ç«¯çš„å¼€é”€ã€‚</li>
</ul>
<p>å®˜ç½‘åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://jwt.io/introduction/">ä¼ é€é—¨</a></p>
<h1 id="è´°-ç»„æˆ"><a href="#è´°-ç»„æˆ" class="headerlink" title="è´° ç»„æˆ"></a>è´° ç»„æˆ</h1><p>ä¸€ä¸²å®Œæ•´çš„<code>JWT</code>ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œæ¯éƒ¨åˆ†ç”¨è‹±æ–‡å¥å·è¿æ¥ï¼ˆ<code>.</code>ï¼‰è¿æ¥ï¼Œè¿™ä¸‰éƒ¨åˆ†åˆ†åˆ«æ˜¯ï¼š<code>Header</code>ã€<code>Payload</code>ã€<code>Signature</code>ï¼Œæ—¢å¸¸è§„çš„<code>JWT</code>å†…å®¹æ ¼å¼æ˜¯è¿™æ ·çš„ï¼š<code>header.payload.signature</code>ï¼Œå¹¶ä¸”ï¼Œè¿™ä¸€ä¸²å†…å®¹ä¼šè¿›è¡Œ<code>URL</code>æ ¼å¼çš„<code>base64</code>åŠ å¯†ï¼Œä¹Ÿå°±æ˜¯è¯´<code>base64</code>è§£ç æ‰å¯ä»¥çœ‹åˆ°å®é™…ä¼ è¾“çš„å†…å®¹ã€‚ä¸‹é¢è¿™ä¸ªå°±æ˜¯å®Œæ•´çš„<code>JWT</code>ï¼š</p>
<pre><code class="JWT">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
</code></pre>
<ul>
<li><code>Header</code>ï¼šåˆå«æ ‡å¤´ï¼Œå…¶å†…å®¹ä¸»è¦ç”±ä»¤ç‰Œçš„ç±»å‹ï¼ˆ<code>typ</code>ï¼Œä¸€èˆ¬é»˜è®¤æ˜¯<code>JWT</code>ï¼‰å’Œæ‰€ä½¿ç”¨çš„ç­¾åç®—æ³•ï¼ˆ<code>alg</code>ï¼Œ<code>HMAC</code>ã€<code>SHA256</code>æˆ–<code>RSA</code>ï¼‰è¿™ä¸¤éƒ¨åˆ†ç»„æˆï¼Œç„¶åè¿›è¡Œ<code>Base64</code>ç¼–ç ç»„æˆ<code>JWT</code>ç»“æ„çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚</li>
</ul>
<pre><code class="JWT">&#123;
    &quot;alg&quot;: &quot;HS256&quot;,
    &quot;typ&quot;: &quot;JWT&quot;
&#125;
</code></pre>
<ul>
<li><code>Payload</code>ï¼šè¯¥éƒ¨åˆ†åˆå«æœ‰æ•ˆè½½è·ï¼Œå…¶å†…å®¹ä¸»è¦ä¿å­˜äº†éœ€è¦ä¼ é€’ç»™æœåŠ¡å™¨çš„å®é™…ä¿¡æ¯å†…å®¹ï¼Œä½†æ˜¯æ³¨æ„ä¸åº”è¯¥åœ¨è¯¥éƒ¨åˆ†å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºå®¢æˆ·ç«¯ä¹Ÿå¯å¯¹ç§°è§£å¯†è¯¥éƒ¨åˆ†ä¿¡æ¯ï¼Œå®ƒç›¸å½“äºæ˜¯æš´éœ²çš„</li>
</ul>
<pre><code class="JWT">&#123;
    &quot;sub&quot;: &quot;1234567890&quot;,
    &quot;name&quot;: &quot;John Doe&quot;,
    &quot;iat&quot;: 1516239022
&#125;
</code></pre>
<ul>
<li><code>Signature</code>ï¼šè¯¥éƒ¨åˆ†ä¸»è¦ç”¨æ¥å¯¹å‰é¢ä¸¤éƒ¨åˆ†è¿›è¡Œç­¾åï¼Œä¿è¯<code>JWT</code>ä¸è¢«ç¯¡æ”¹ã€‚ä¹‹æ‰€ä»¥å¯ä»¥ç”¨æ¥åšç­¾åï¼Œæ˜¯å› ä¸ºè¯¥éƒ¨é—¨å­˜åœ¨ä¸€æ®µå¯†é’¥ï¼Œä¸»è¦ç”¨æˆ·ä¸çŸ¥é“è¯¥å¯†é’¥ï¼Œå°±ç ´è§£ä¸å‡ºæ¥è¿™éƒ¨åˆ†å†…å®¹ã€‚ä¸‹é¢ä»£ç ä¸­çš„<code>your-256-bit-secret</code>å°±æ˜¯éœ€è¦æœåŠ¡ç«¯ä¿å­˜çš„å¯†é’¥ã€‚</li>
</ul>
<pre><code class="JWT">HMACSHA256(
    base64UrlEncode(header) + &quot;.&quot; +
    base64UrlEncode(payload),
    your-256-bit-secret
)
</code></pre>
<p>å®˜æ–¹ä¹Ÿæä¾›äº†åœ¨çº¿è§£å¯†ï¼š<br><img src="/images/%E5%AF%86%E7%A0%81%E5%AD%A6/bcbf143257faf81b4b7d85f75db64e7b.png" alt="bcbf143257faf81b4b7d85f75db64e7b.png"></p>
<h1 id="å-è®¤è¯è¿‡ç¨‹"><a href="#å-è®¤è¯è¿‡ç¨‹" class="headerlink" title="å è®¤è¯è¿‡ç¨‹"></a>å è®¤è¯è¿‡ç¨‹</h1><p><code>JWT</code>çš„è®¤è¯è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>é¦–å…ˆï¼Œå®¢æˆ·ç«¯é€šè¿‡<code>Web</code>è¡¨å•å°†è‡ªå·±çš„ç”¨æˆ·åå’Œå¯†ç å‘é€åˆ°åç«¯çš„æ¥å£ã€‚è¿™ä¸€è¿‡ç¨‹ä¸€èˆ¬æ˜¯åªæ¶‰åŠåˆ°é¡µé¢çš„<code>http post</code>è¯·æ±‚ï¼Œä¸ä¼šæœ‰<code>JWT</code>äº§ç”Ÿã€‚</li>
<li>å½“æœåŠ¡ç«¯æ ¸å¯¹ç”¨æˆ·åå’Œå¯†ç æˆåŠŸåï¼Œä¼šå°†ç”¨æˆ·çš„<code>ID</code>ç­‰éæ•æ„Ÿä¿¡æ¯ä½œä¸º<code>JWT</code>çš„<code>Payload</code>ï¼Œå°†å…¶ä¸å¤´éƒ¨åˆ†åˆ«è¿›è¡Œ<code>Base64</code>ç¼–ç æ‹¼æ¥åç­¾åï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„<code>JWT</code>ã€‚æ ¼å¼ä¸ºï¼š <code>head.payload.singurater</code>ã€‚</li>
<li>æ¥ç€æœåŠ¡ç«¯å°†<code>JWT</code>ä½œä¸ºç™»å½•æˆåŠŸçš„è¿”å›ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥å°†è¿”å›çš„ç»“æœä¿å­˜åœ¨<code>localStorage</code>æˆ–<code>sessionStorage</code>ä¸Šï¼Œå¦‚æœé€€å‡ºç™»å½•æ—¶å®¢æˆ·ç«¯åˆ é™¤ä¿å­˜çš„<code>JWT</code>ã€‚</li>
<li>å®¢æˆ·ç«¯åœ¨æ¯æ¬¡è¯·æ±‚æ—¶å°†<code>JWT</code>æ”¾å…¥<code>HTTP Header</code>ä¸­çš„<code>Authorization</code>ä½ï¼Œè¿™ä¸€æ­¥å¯ä»¥æœ‰æ•ˆçš„è§£å†³<code>XSS</code>å’Œ<code>CSRF</code>é—®é¢˜ã€‚</li>
<li>æœåŠ¡ç«¯æ£€æŸ¥<code>JWT</code>æ˜¯å¦å­˜åœ¨ï¼Œæ—¢éªŒè¯<code>JWT</code>çš„æœ‰æ•ˆæ€§ã€‚å¦‚æ£€æŸ¥ç­¾åæ˜¯å¦æ­£ç¡®ã€æ£€æŸ¥<code>Token</code>æ˜¯å¦è¿‡æœŸã€æ£€æŸ¥<code>Token</code>çš„æ¥æ”¶æ–¹æ˜¯å¦æ˜¯è‡ªå·±ã€‚</li>
<li>éªŒè¯é€šè¿‡åæœåŠ¡ç«¯ä½¿ç”¨<code>JWT</code>ä¸­åŒ…å«çš„ç”¨æˆ·ä¿¡æ¯è¿›è¡Œå…¶ä»–é€»è¾‘æ“ä½œï¼Œè¿”å›ç›¸åº”ç»“æœã€‚</li>
</ul>
<p><img src="/images/%E5%AF%86%E7%A0%81%E5%AD%A6/7f6c1849756f128c0e72a9c6821fb82a.png" alt="7f6c1849756f128c0e72a9c6821fb82a.png"></p>
<h1 id="è‚†-ä»£ç å®ç°"><a href="#è‚†-ä»£ç å®ç°" class="headerlink" title="è‚† ä»£ç å®ç°"></a>è‚† ä»£ç å®ç°</h1><pre><code class="Golang">package main

import (
    &quot;crypto/hmac&quot;
    &quot;crypto/sha256&quot;
    &quot;encoding/base64&quot;
    &quot;encoding/json&quot;
    &quot;fmt&quot;
    &quot;log&quot;
    &quot;strings&quot;
)

// JWTæ•°æ®ç±»å‹
type JWT struct &#123;
    Header    string
    Payload   string
    Signature string
    Data      JWTData
    Type      JWTType
&#125;

// æ³¨æ„Algä¸Typé¡ºåº
type JWTType struct &#123;
    Alg string `json:&quot;alg&quot;`
    Typ string `json:&quot;typ&quot;`
&#125;

// ç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯
type JWTData struct &#123;
    Data string `json:&quot;data&quot;`
&#125;

// å¤„ç†é”™è¯¯æ–¹æ³•
func (data *JWT) handlingErrors(err error, funname string) &#123;
    if err != nil &#123;
        fmt.Println(&quot;[\033[31;1m-\033[0m]&quot;, funname, &quot;Errorï¼š&quot;, err)
        log.Panic(err)
    &#125;
&#125;

// ç­¾åï¼Œkeyå€¼ä¸€èˆ¬åœ¨æœåŠ¡ç«¯ï¼Œä¸ä¼šç»™å®¢æˆ·ç«¯å…¬å¸ƒ
func (data *JWT) jWTSignature(key string) string &#123;
    h := hmac.New(sha256.New, []byte(key))
    h.Write([]byte(data.Header + &quot;.&quot; + data.Payload))
    return data.Base64UrlSafeEncode([]byte(h.Sum(nil)))
&#125;

// å°†stringè½¬æ¢ä¸ºurl_safe base64ç¼–ç 
func (data *JWT) Base64UrlSafeEncode(source []byte) string &#123;
    // Base64 Url Safe is the same as Base64 but does not contain &#39;/&#39; and &#39;+&#39; (replaced by &#39;_&#39; and &#39;-&#39;) and trailing &#39;=&#39; are removed.
    // è¿›è¡Œbase64ç¼–ç 
    bytearr := base64.StdEncoding.EncodeToString(source)
    // å°†/å·æ”¹ä¸º_
    safeurl := strings.Replace(string(bytearr), &quot;/&quot;, &quot;_&quot;, -1)
    // å°†+å·æ”¹ä¸º-
    safeurl = strings.Replace(safeurl, &quot;+&quot;, &quot;-&quot;, -1)
    // å°†=å·å»æ‰
    safeurl = strings.Replace(safeurl, &quot;=&quot;, &quot;&quot;, -1)
    return safeurl
&#125;

// å°†url_safe base64ç¼–ç è½¬æ¢ä¸ºstring
func Base64URLDecode(data string) ([]byte, error) &#123;
    var missing = (4 - len(data)%4) % 4
    data += strings.Repeat(&quot;=&quot;, missing)
    return base64.URLEncoding.DecodeString(data)
&#125;

// JWTåŠ å¯†å‡½æ•°
func (data *JWT) jWTencode(val string) string &#123;
    // èµ‹å€¼
    data.Data = JWTData&#123;
        Data: val,
    &#125;
    // åˆ›å»ºJWTçš„Header
    // èµ‹å€¼
    data.Type = JWTType&#123;
        Typ: &quot;JWT&quot;,
        Alg: &quot;HS256&quot;,
    &#125;
    // ååºåˆ—åŒ–
    header, err := json.Marshal(data.Type)
    data.handlingErrors(err, &quot;json.Marshal&quot;)
    // è¿›è¡Œbase64ç¼–ç ï¼ŒJWTçš„Headeréƒ½éœ€è¦è¿›è¡Œbase64
    data.Header = data.Base64UrlSafeEncode(header)
    // åˆ›å»ºJWTçš„Payload
    // ååºåˆ—åŒ–
    payload, err := json.Marshal(data.Data)
    data.handlingErrors(err, &quot;json.Marshal&quot;)
    // è¿›è¡Œbase64ç¼–ç ï¼ŒJWTçš„Headeréƒ½éœ€è¦è¿›è¡Œbase64
    data.Payload = data.Base64UrlSafeEncode(payload)
    // keyæ˜¯keyå€¼ï¼Œcryæ˜¯åŠ å¯†ç®—æ³•
    data.Signature = data.jWTSignature(&quot;your-256-bit-secret&quot;)
    return data.Header + &quot;.&quot; + data.Payload + &quot;.&quot; + data.Signature
&#125;

// JWTè§£å¯†å‡½æ•°
func (data *JWT) jWTdecode(token string) string &#123;
    // JWTåˆ‡ç‰‡
    jwt := strings.Split(token, &quot;.&quot;)
    if len(jwt) != 3 &#123;
        return &quot;JWTæ ¼å¼ä¸æ­£ç¡®ï¼&quot;
    &#125;
    // èµ‹å€¼ç»™å˜é‡
    data.Header = jwt[0]
    data.Payload = jwt[1]
    data.Signature = jwt[2]
    // åˆ¤æ–­Signatureæ˜¯å¦æ­£ç¡®
    Signature := data.jWTSignature(&quot;your-256-bit-secret&quot;)
    if Signature != data.Signature &#123;
        return &quot;JWTç­¾åä¸æ­£ç¡®ï¼&quot;
    &#125;
    // è½¬æ¢header
    header, err := Base64URLDecode(data.Header)
    data.handlingErrors(err, &quot;Base64URLDecode&quot;)
    err = json.Unmarshal(header, &amp;data.Type)
    data.handlingErrors(err, &quot;json.Unmarshal&quot;)
    // è½¬æ¢payload
    payload, err := Base64URLDecode(data.Payload)
    data.handlingErrors(err, &quot;Base64URLDecode&quot;)
    data.Payload = string(payload)
    return data.Payload
&#125;

// ä¸»å‡½æ•°
func main() &#123;
    j := new(JWT)
    s := j.jWTencode(&quot;11111111121&quot;)
    fmt.Println(s)
    fmt.Println(j.jWTdecode(&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjoiMTExMTExMTExMjEifQ.7tymjdzP5e7LnDYGNhJ1icMDRZaIf8i_B-ody5tKX_I&quot;))
&#125;
</code></pre>
<h1 id="ä¼-JWTçš„å®‰å…¨æ€§é—®é¢˜"><a href="#ä¼-JWTçš„å®‰å…¨æ€§é—®é¢˜" class="headerlink" title="ä¼ JWTçš„å®‰å…¨æ€§é—®é¢˜"></a>ä¼ JWTçš„å®‰å…¨æ€§é—®é¢˜</h1><ul>
<li><p>æ•æ„Ÿä¿¡æ¯æ³„éœ²<br>ç”±äº<code>JWT</code>çš„<code>payload</code>éƒ¨åˆ†å­˜æ”¾äº†ç”¨æˆ·çš„ä¿¡æ¯ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡<code>Base64</code>è§£ç ï¼Œæ‰€ä»¥å¦‚æœå°†æ•æ„Ÿçš„ä¿¡æ¯å­˜æ”¾åœ¨<code>payload</code>ä¸­ï¼Œä¼šå¯¼è‡´ä¿¡æ¯æ³„éœ²ã€‚</p>
</li>
<li><p>æœªæ ¡éªŒç­¾å<br>æœ‰ç‚¹æœåŠ¡ç«¯ä¼šå–æ¶ˆ<code>JWT</code>çš„<code>signature</code>éƒ¨åˆ†æ ¡éªŒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥ä¿®æ”¹<code>JWT</code>å‰é¢çš„ä¸¤éƒ¨åˆ†è¿›è¡Œæµ‹è¯•ï¼Œçœ‹å…¶æ˜¯å¦æœ‰æ•ˆã€‚</p>
</li>
<li><p>ç­¾åç®—æ³•å¯è¢«ä¿®æ”¹ä¸º<code>none</code><br>æœ‰çš„æ—¶å€™<code>signature</code>éƒ¨åˆ†çš„åŠ å¯†è®¤è¯å–å†³ä¸<code>header</code>éƒ¨åˆ†çš„ç­¾åç®—æ³•ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¦‚æœå°†<code>header</code>çš„ç­¾åç®—æ³•æ”¹æˆ<code>none</code>å½¢å¼ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯æ¥æ”¶åˆ°<code>JWT</code>åä¼šå°†å…¶è®¤å®šä¸ºæ— åŠ å¯†ç®—æ³•ï¼Œ äºæ˜¯å¯¹<code>signature</code>çš„æ£€éªŒä¹Ÿå°±å¤±æ•ˆäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥éšæ„ä¿®æ”¹<code>payload</code>éƒ¨åˆ†ä¼ªé€ ç”¨æˆ·ä¿¡æ¯ã€‚ç”¨<code>none</code>ç®—æ³•ç”Ÿæˆçš„<code>JWT</code>åªæœ‰ä¸¤éƒ¨åˆ†äº†ï¼Œè¿ç­¾åéƒ½ä¸å­˜åœ¨ã€‚</p>
</li>
<li><p>ç­¾åå¯†é’¥çˆ†ç ´<br><code>JWT</code>çš„å®‰å…¨æ€§å¾ˆå¤§ç¨‹åº¦å–å†³äºåŠ å¯†çš„å¯†é’¥ï¼Œæˆ‘ä»¬å¦‚æœå¯ä»¥é€šè¿‡çˆ†ç ´åŠ å¯†å¯†é’¥ï¼Œè·å¾—æ­£ç¡®çš„å¯†é’¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥éšæ„ä¿®æ”¹<code>JWT</code>ä¸­<code>payload</code>éƒ¨åˆ†ä¿¡æ¯äº†ã€‚<code>JWT</code>çˆ†ç ´è„šæœ¬ï¼š<a target="_blank" rel="noopener" href="https://github.com/Ch1ngg/JWTPyCrack">https://github.com/Ch1ngg/JWTPyCrack</a></p>
</li>
<li><p>ä¿®æ”¹éå¯¹ç§°å¯†ç ç®—æ³•ä¸ºå¯¹ç§°å¯†ç ç®—æ³•<br><code>JWT</code>çš„ç­¾ååŠ å¯†ç®—æ³•æœ‰ä¸¤ç§ï¼Œå¯¹ç§°åŠ å¯†ç®—æ³•å’Œéå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚å¯¹ç§°åŠ å¯†ç®—æ³•æ¯”å¦‚<code>HS256</code>ï¼ŒåŠ è§£å¯†ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥ï¼Œä¿å­˜åœ¨æœåŠ¡ç«¯ã€‚éå¯¹ç§°åŠ å¯†ç®—æ³•æ¯”å¦‚<code>RS256</code>ï¼Œåç«¯åŠ å¯†ä½¿ç”¨ç§é’¥ï¼Œå‰ç«¯è§£å¯†ä½¿ç”¨å…¬é’¥ï¼Œå…¬é’¥æ˜¯æˆ‘ä»¬å¯ä»¥è·å–åˆ°çš„ã€‚å¦‚æœæˆ‘ä»¬ä¿®æ”¹<code>header</code>ï¼Œå°†ç®—æ³•ä»<code>RS256</code>æ›´æ”¹ä¸º<code>HS256</code>ï¼Œåç«¯ä»£ç ä¼šä½¿ç”¨<code>RS256</code>çš„å…¬é’¥ä½œä¸º<code>HS256</code>ç®—æ³•çš„å¯†é’¥ã€‚äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥ç”¨<code>RS256</code>çš„å…¬é’¥ä¼ªé€ æ•°æ®ã€‚</p>
</li>
<li><p>ä¼ªé€ å¯†é’¥ï¼ˆ<code>CVE-2018-0114</code>ï¼‰<br><code>JWK</code>æ˜¯<code>header</code>é‡Œçš„ä¸€ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å‡ºå¯†é’¥ï¼Œå­˜åœ¨è¢«ä¼ªé€ çš„é£é™©ã€‚æ¯”å¦‚ï¼š<a target="_blank" rel="noopener" href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-0114">CVE-2018-0114</a>æ”»å‡»è€…å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•æ¥ä¼ªé€ <code>JWT</code>ï¼šåˆ é™¤åŸå§‹ç­¾åï¼Œå‘æ ‡å¤´æ·»åŠ æ–°çš„å…¬é’¥ï¼Œç„¶åä½¿ç”¨ä¸è¯¥å…¬é’¥å…³è”çš„ç§é’¥è¿›è¡Œç­¾åã€‚(è¿™ä¸ªå®‰å…¨æ€§é—®é¢˜è¯´å®è¯æˆ‘ä¸å¤ªç†è§£ï¼Œæˆ‘åœ¨æƒ³å¦‚æœç›´æ¥ä¸è¦è¿™ä¸ªå­—æ®µä¸å°±å¯ä»¥é¿å…è¿™ä¸ªæ¼æ´äº†å—ï¼Ÿ)</p>
</li>
</ul>
<p>å¯¹äºéªŒè¯<code>JWT</code>çš„å®‰å…¨æ€§ï¼Œå¯ä»¥ä½¿ç”¨è¯¥å·¥å…·ï¼š<a target="_blank" rel="noopener" href="https://github.com/ticarpi/jwt_tool">jwt_tool</a></p>
<blockquote>
<p>JWTçš„ä½¿ç”¨å»ºè®®ï¼š</p>
<ul>
<li>ä¸è¦å­˜æ”¾æ•æ„Ÿä¿¡æ¯åœ¨Tokené‡Œã€‚</li>
<li>Payloadä¸­çš„expæ—¶æ•ˆä¸è¦è®¾å®šå¤ªé•¿</li>
<li>å¼€å¯Only Httpé¢„é˜²XSSæ”»å‡»</li>
<li>å¦‚æœæ‹…å¿ƒé‡æ’­æ”»å‡»ï¼ˆreplay attacksï¼‰å¯ä»¥å¢åŠ jtiï¼ˆJWT IDï¼‰ï¼Œexpï¼ˆæœ‰æ•ˆæ—¶é—´ï¼‰Claim</li>
<li>åœ¨ä½ çš„åº”ç”¨ç¨‹åºåº”ç”¨å±‚ä¸­å¢åŠ é»‘åå•æœºåˆ¶ï¼Œå¿…è¦çš„æ—¶å€™å¯ä»¥è¿›è¡ŒBlockåšé˜»æŒ¡ï¼ˆè¿™æ˜¯é’ˆå¯¹æ‰ä»¤ç‰Œè¢«ç¬¬ä¸‰æ–¹ä½¿ç”¨çªƒå–çš„æ‰‹åŠ¨é˜²å¾¡ï¼‰</li>
</ul>
</blockquote>
<h1 id="é™†-å‚è€ƒ"><a href="#é™†-å‚è€ƒ" class="headerlink" title="é™† å‚è€ƒ"></a>é™† å‚è€ƒ</h1><ul>
<li><a target="_blank" rel="noopener" href="https://jwt.io/">JWTå®˜ç½‘</a></li>
<li><a target="_blank" rel="noopener" href="https://www.wangan.com/wenda/9472">JWT å®‰å…¨è®¤è¯çš„ä¼˜åŠ¿æœ‰å“ªäº›</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/CryFace/p/14743323.html">ä¸ºä»€ä¹ˆä½ æ”¾å¼ƒäº†Sessionè®¤è¯é€‰æ‹©äº†JWTï¼Ÿ</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/xxxcAxx/article/details/128309755">ä»£æ›¿Sessionçš„JWT</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/tomyyyyyy/article/details/119693410">JWTçš„å®‰å…¨é—®é¢˜</a></li>
</ul>

        </div>
        
        
        <div id="comment">
            <div id="giscus-container" class="giscus"></div>
        </div>
        
    </div>
    
    <div id="article-card">
        <div id="card-style">
    <div id="card-div" class="card-cls">
        <div class="avatar">
            <img src="/images/f6e2b991f74bfd7b88c3ab1a3d513b94.jpg" alt="avatar" />
        </div>
        <div class="name">å°C&amp;å¤©å¤©</div>
        <div class="description">
            <p>ä¿®å­¦å‚¨èƒ½ å…ˆåšåæ¸Š</p>

        </div>
        
        <div class="icon-links">
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="https://github.com/A7cc">
                    <i class="fa-brands fa-github fa-fw"></i>
                </a>
            </span>
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="https://www.qq.com/">
                    <i class="fa-brands fa-qq fa-fw"></i>
                </a>
            </span>
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="https://www.weibo.com/">
                    <i class="fa-brands fa-weibo fa-fw"></i>
                </a>
            </span>
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="https://google.com/">
                    <i class="fa-brands fa-google fa-fw"></i>
                </a>
            </span>
            
        </div>
        
        
        <div class="friend-links">
            
            <span class="friend-link">
                <a target="_blank" rel="noopener" href="http://www.wgs6km.top/">kyrieee</a>
            </span>
            
            <span class="friend-link">
                <a target="_blank" rel="noopener" href="https://tonyd0g.gitee.io/">tonyd0g</a>
            </span>
            
            <span class="friend-link">
                <a target="_blank" rel="noopener" href="https://ruyueattention.github.io/">ruyueattention</a>
            </span>
            
        </div>
        
    </div>
    
    <!-- <br /> -->
    <!-- ç›®å½• -->
    <!-- 
    <div id="card-div">
        <div id="toc" class="toc-article">
            <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A3%B9-%E4%BB%8B%E7%BB%8D"><span class="toc-text">å£¹ ä»‹ç»</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B4%B0-%E7%BB%84%E6%88%90"><span class="toc-text">è´° ç»„æˆ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%81-%E8%AE%A4%E8%AF%81%E8%BF%87%E7%A8%8B"><span class="toc-text">å è®¤è¯è¿‡ç¨‹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%82%86-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">è‚† ä»£ç å®ç°</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BC%8D-JWT%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E9%97%AE%E9%A2%98"><span class="toc-text">ä¼ JWTçš„å®‰å…¨æ€§é—®é¢˜</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%86-%E5%8F%82%E8%80%83"><span class="toc-text">é™† å‚è€ƒ</span></a></li></ol>
        </div>    
    </div>
     -->
</div>

<div id="card-style-fun">
    
    <!-- ä»Šæ—¥è¯—å¥ -->
    <br />
    <div id="card-div">
        <div class="good-sentence">
            <div class="toolio">
                <div class="circle"><span class="red"></span></div>
                <div class="circle"><span class="yellow"></span></div>
                <div class="circle"><span class="green"></span></div>
                <div class="circle"><span class="text">ä»Šæ—¥è¯—å¥</span></div>
            </div>
            <div class="sentence">
                <div id="sentenceid" onload="getsentence();"></div>
            </div>
        </div>
    </div>
    <!-- æ—¥æœŸä¿¡æ¯ -->
    <br />
    <div id="card-div">
        <img src="//api.vvhan.com/api/ipCard?tip=A7cc" width="300" height="180">
    </div>
    
</div>



    </div>
    
</div>
                <!-- é¡µè„š -->
                <footer id="footer">
    <div id="footer-wrap">
        <div>
            <span id="timeDate">è½½å…¥å¤©æ•°...</span><span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
            <script>
                var now = new Date(); 
                function createtime() { 
                    var grt= new Date("07/10/2022 00:00:00");
                    now.setTime(now.getTime()+250); 
                    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
                    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
                    if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
                    mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
                    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
                    snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
                    document.getElementById("timeDate").innerHTML = "å·²è¿è¡Œ "+dnum+" å¤© "; 
                    document.getElementById("times").innerHTML = hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’"; 
                } 
            setInterval("createtime()",250);
            </script>
        </div>
        <div>
            &copy;
            2022 - 2024 å°Câ™¥å¤©å¤©
            <span class="footer-icon">
                <i class="fa-brands fa-github fa-fw"></i>
            </span>
            &commat;å°C&amp;å¤©å¤©
        </div>
        <div>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX</a> 
        </div>
        
    </div>
</footer>

            </div>
            <!-- ç®€å•çš„ç‚¹å‡»å›¾ç‰‡æ”¾å¤§ç¼©å°çš„é¢„è§ˆ -->
            
            <div name="fade">
                <div id="preview" ref="preview" v-show="previewShow">
                    <img id="preview-content" ref="previewContent" />
                </div>
            </div>
            
        </div>
        <!-- çœ‹æ¿å¨˜ -->
        
        <div id="L2dCanvas"></div>
        <script src="/js/lib/live2d.min.js"></script>
        <!-- è®¾ç½®éšæœºæ¨¡æ¿ -->
        
        <script>
            var v = new Viewer({
                basePath: "/model",
                role: "aidang_2",
                mobile: true,
            });
        </script>
        
        <!-- è¯—å¥ -->
        
        <script>
            // // æ¯éš”10åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡getsentenceè¿™ä¸ªå‡½æ•°
            window.setInterval(getsentence, 100*60*5);
            function getsentence() {
                // è¿™é‡Œæ²¡æœ‰è€ƒè™‘IEæµè§ˆå™¨ï¼Œå¦‚æœéœ€è¦æ‹©ifåˆ¤æ–­åŠ 
                var xhr = new XMLHttpRequest();  
                xhr.open('GET', "https://zj.v.api.aa1.cn/api/wenan-shici/?type=json",true);
                xhr.send(JSON.stringify(null));
                xhr.onreadystatechange = function () {
                    if (xhr.status === 200 && xhr.readyState === 4) {
                        //jså¤„ç†æ•°æ®
                        // xhr.responseText.match(/content":(".+?")/g)
                        getdata = JSON.parse(xhr.responseText).msg;
                    }else{
                        getdata = "é•¿é£ç ´æµªä¼šæœ‰æ—¶ï¼Œç›´æŒ‚äº‘å¸†æµæ²§æµ·ã€‚â€”â€”æç™½ã€Šè¡Œè·¯éš¾ã€‹";
                    }
                    document.getElementById("sentenceid").innerHTML = getdata;
                }
            }
            window.onload = getsentence;
        </script>
        
        <!-- ç‚¹å‡» -->
        <script>
            let body = document.getElementsByTagName('body')[0];
            body.addEventListener('click', (e) => {
                let contentArr = ['âœŠ','ğŸ˜˜','ğŸ˜','ğŸ˜Š','ğŸ˜­','ğŸ˜¡','ğŸ˜‹','ğŸ‘','ğŸ·','ğŸ˜±','ğŸ’·','ğŸ’µ','Ã—','ğŸ†—','â„–','â­','ğŸŒ™','â™¥','ğŸ’´','â˜€','ğŸ','ğŸ‚','ğŸ','âˆš'];
                let randomNum = function (n) {
                    return Math.floor(Math.random() * n)
                }
                let span = document.createElement('span');
                span.innerHTML = `${contentArr[randomNum(contentArr.length)]}`;
                span.style.color = `rgb(${randomNum(256)},${randomNum(256)},${randomNum(256)})`;
                span.style.position = 'absolute';
                span.style.top = `${e.pageY}px`;
                span.style.left = `${e.pageX}px`;
                span.style.transition = 'all 1s ease';
                span.style.zIndex = 20000;
                body.appendChild(span)
                setTimeout(()=>{
                    span.style.top = span.offsetTop - 100 + 'px';
                    span.style.opacity = 0;
                    setTimeout(()=>{span.remove()},700)
                },0)
            })
        </script>
        <!-- æµæ˜ŸèƒŒæ™¯ç‰¹æ•ˆ -->
        
        <canvas id="background" style="position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:-1"></canvas>
        <script src="/js/meteorbackground.js"></script>
        
        <script src="/js/main.js"></script>
    </body>
</html>
