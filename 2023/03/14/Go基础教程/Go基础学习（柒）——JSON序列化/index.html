
<!DOCTYPE html>
<html lang="zh-Hans">
    <head>
        <meta charset="utf-8" />
        <title>GoåŸºç¡€å­¦ä¹ ï¼ˆæŸ’ï¼‰â€”â€”JSONåºåˆ—åŒ– | å°Câ™¥å¤©å¤©</title>
        <meta name="author" content="å°C&å¤©å¤©" />
        <meta name="description" content="^v^" />
        <meta name="keywords" content="" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <link rel="icon" href="/images/icon.jpg" />
        <script src="/js/vue/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.4.0/css/all.min.css" />
<link rel="preconnect" href="https://fonts.loli.net" />
<link rel="preconnect" href="https://gstatic.loli.net" crossorigin />
<link rel="stylesheet" href="https://fonts.loli.net/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap" />
<script> const mixins = {}; </script>

<!-- å…¼å®¹ä¸åŒç‰ˆæœ¬çš„æµè§ˆå™¨ -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>


<!-- é«˜äº®ä»£ç  -->
<script src="https://static-argvchs.netlify.app/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script src="https://static-argvchs.netlify.app/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link rel="stylesheet" href="https://static-argvchs.netlify.app/libs/highlight.js/11.8.0/styles/base16-onedark.min.css" />
<script src="/js/lib/highlight.js"></script>


<!-- ä½¿ç”¨ KaTeX æ¸²æŸ“æ•°å­¦å…¬å¼ -->
<script src="https://static-argvchs.netlify.app/libs/KaTeX/0.16.8/katex.min.js"></script>
<script src="https://static-argvchs.netlify.app/libs/KaTeX/0.16.8/contrib/auto-render.min.js"></script>
<link rel="stylesheet" href="https://static-argvchs.netlify.app/libs/KaTeX/0.16.8/katex.min.css" />
<script src="/js/lib/math.js"></script>


<!-- ç®€å•çš„ç‚¹å‡»å›¾ç‰‡æ”¾å¤§ç¼©å°çš„é¢„è§ˆ -->
<script src="/js/lib/preview.js"></script>


<!-- çœ‹æ¿å¨˜ -->
<script src="https://cdn.staticfile.org/pixi.js/4.6.1/pixi.min.js"></script>



<!-- è¯„è®ºè®¾ç½® -->

<script
    src="https://giscus.app/client.js"
    data-repo="A7cc/giscus-comments"
    data-repo-id="R_kgDOKKSvfw"
    data-category="Announcements"
    data-category-id="DIC_kwDOKKSvf84CYyp2"
    data-mapping="pathname"
    data-strict="1"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="https://static-argvchs.netlify.app/css/giscus.css"
    data-lang="zh-CN"
    crossorigin
    async
></script>



<script src="https://static-argvchs.netlify.app/libs/animejs/3.2.1/anime.min.js"></script>
<link rel="stylesheet" href="/css/main.css" />

    <meta name="generator" content="Hexo 6.2.0"></head>
    <body>
        <div id="layout">
            <!-- é¡µé¢åŠ è½½ -->
            <transition name="fade">
                <div id="loading" v-show="loading">
                    <div id="loading-circle">
                        <h2>LOADING</h2>
                        <p>æ­£åœ¨åŠ è½½</p>
                        <img src="/images/afde9fa65a5742a90b51d6e1211e841e.gif" />
                    </div>
                </div>
            </transition>
            <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>å°Câ™¥å¤©å¤©</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;ä¸»é¡µ</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;å…³äº</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;æ–‡ç« </span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;åˆ†ç±»</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;æ ‡ç­¾</span>
        </a>
        
        <a href="/tools">
            <i class="fa-solid fa-tools fa-fw"></i>
            <span>&ensp;å·¥å…·</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;å°Câ™¥å¤©å¤©</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">ä¸»é¡µ</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">å…³äº</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">æ–‡ç« </div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">åˆ†ç±»</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">æ ‡ç­¾</div>
                    </div>
                </a>
                
                <a href="/tools">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tools fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">å·¥å…·</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

            <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
                <div id="article-posts-wrap" true ref="homePostsWrap">
    <div class="article">
        <div>
            <h1>GoåŸºç¡€å­¦ä¹ ï¼ˆæŸ’ï¼‰â€”â€”JSONåºåˆ—åŒ–</h1>
        </div>
        <div class="info">
            <span class="date">
                <span class="icon">
                    <i class="fa-solid fa-calendar fa-fw"></i>
                </span>
                2023/3/14
            </span>
            
            <span class="category">
                <a href="/categories/Go%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/">
                    <span class="icon">
                        <i class="fa-solid fa-bookmark fa-fw"></i>
                    </span>
                    GoåŸºç¡€æ•™ç¨‹
                </a>
            </span>
            
            
            <span class="tags">
                <span class="icon">
                    <i class="fa-solid fa-tags fa-fw"></i>
                </span>
                
                
                <span class="tag">
                    
                    <a href="/tags/%E5%BC%80%E5%8F%91/" style="color: #03a9f4">å¼€å‘</a>
                </span>
                
                <span class="tag">
                    
                    <a href="/tags/Golang/" style="color: #ff7d73">Golang</a>
                </span>
                
            </span>
            
        </div>
        
        <div class="content" v-pre>
            <h1 id="å£¹-JSONåºåˆ—åŒ–ä»‹ç»"><a href="#å£¹-JSONåºåˆ—åŒ–ä»‹ç»" class="headerlink" title="å£¹ JSONåºåˆ—åŒ–ä»‹ç»"></a>å£¹ JSONåºåˆ—åŒ–ä»‹ç»</h1><p><code>JSON(JavaScript Object Notation)</code> æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œå¸¸ç”¨äºå‰åç«¯æ•°æ®ä¼ è¾“ï¼Œæ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆã€‚JSONé”®å€¼å¯¹æ˜¯ç”¨æ¥ä¿å­˜JSå¯¹è±¡çš„ä¸€ç§æ–¹å¼ï¼Œé”®&#x2F;å€¼å¯¹ç»„åˆä¸­çš„é”®åå†™åœ¨å‰é¢å¹¶ç”¨åŒå¼•å·<code>&quot;&quot;</code>åŒ…è£¹ï¼Œä½¿ç”¨å†’å·<code>:</code>åˆ†éš”ï¼Œç„¶åç´§æ¥ç€å€¼ï¼›å¤šä¸ªé”®å€¼ä¹‹é—´ä½¿ç”¨è‹±æ–‡<code>,</code>åˆ†éš”ã€‚</p>
<p><font color="red">ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Ÿä¸ªäººè§‰å¾—æ˜¯å› ä¸ºä¸åŒè¯­è¨€çš„æ•°æ®ç±»å‹çš„å†…å­˜åˆ†é…æƒ…å†µã€è¯­æ³•ç­‰ä¸åŒï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§ç»Ÿä¸€çš„æ ¼å¼å»è¯†åˆ«å’Œè¯´æ˜ï¼Œä¸åŒè¯­è¨€ä¹‹é—´æ•°æ®çš„äº¤æ¢ï¼Œè¿™å°±éœ€è¦åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œä¾‹å¦‚ï¼Œ<code>Python</code>ä¸<code>Go</code>è¯­è¨€çš„ä¸åŒï¼Œä¹‹é—´çš„äº¤äº’æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</font></p>
<p>å¯¹äºJSONåºåˆ—åŒ–ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨<code>encoding/json</code>åº“æˆ–è€…ç¬¬ä¸‰æ–¹åº“<code>github.com/tidwall/gjson</code>ï¼Œè¿›è¡ŒJSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œè¿™é‡Œæˆ‘ä»¬ç®€å•ä»‹ç»ä¸€ä¸‹å®˜æ–¹åº“<code>encoding/json</code>åº“ï¼Œå…¶ä»–ç¬¬ä¸‰æ–¹åº“ï¼Œè‡ªè¡Œäº†è§£å­¦ä¹ ã€‚</p>
<span id="more"></span>
<h1 id="è´°-JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–å‡½æ•°"><a href="#è´°-JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–å‡½æ•°" class="headerlink" title="è´° JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–å‡½æ•°"></a>è´° JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–å‡½æ•°</h1><p>å¯¹äºJSONåºåˆ—åŒ–ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªå‡½æ•°ï¼š<code>Unmarshal</code>å‡½æ•°ï¼ˆJSONååºåˆ—åŒ–ï¼‰å’Œ<code>Marshal</code>å‡½æ•°ï¼ˆåºåˆ—åŒ–ï¼‰</p>
<h2 id="2-1-Unmarshalå‡½æ•°â€”â€”JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸ºç»“æ„ä½“"><a href="#2-1-Unmarshalå‡½æ•°â€”â€”JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸ºç»“æ„ä½“" class="headerlink" title="2.1 Unmarshalå‡½æ•°â€”â€”JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸ºç»“æ„ä½“"></a>2.1 Unmarshalå‡½æ•°â€”â€”JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸ºç»“æ„ä½“</h2><p><code>Unmarshal</code>å‡½æ•°æ˜¯å°†JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸ºç»“æ„ä½“ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ <code>json.UnMarshal()</code> å‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯å­—èŠ‚åˆ‡ç‰‡ï¼Œæ‰€ä»¥ç›¸å½“äºJSONæ ¼å¼çš„å­—èŠ‚åˆ‡ç‰‡è½¬åŒ–ä¸ºç»“æ„ä½“<code>struct</code>ã€‚</p>
<p>æ ¼å¼ï¼š</p>
<pre><code class="go">func Unmarshal(data []byte, v interface&#123;&#125;) error
// dataæ˜¯è¦è¿›è¡Œè½¬åŒ–çš„jsonæ•°æ®
// væ˜¯è¢«è½¬åŒ–åçš„structæ•°æ®ï¼ŒæŒ‡é’ˆæˆ–è€…ç±»å‹éƒ½è¡Œ
</code></pre>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="go">//Student å­¦ç”Ÿ
type Student struct &#123;
    ID     int
    Gender string
    Name   string
&#125;

//Class ç­çº§
type Class struct &#123;
    Title    string
    Students []*Student
&#125;

func main() &#123;
    c := &amp;Class&#123;
        Title:    &quot;101&quot;,
        Students: make([]*Student, 0, 200),
    &#125;
    for i := 0; i &lt; 10; i++ &#123;
        stu := &amp;Student&#123;
            Name:   fmt.Sprintf(&quot;stu%02d&quot;, i),
            Gender: &quot;ç”·&quot;,
            ID:     i,
        &#125;
        c.Students = append(c.Students, stu)
    &#125;
    //JSONåºåˆ—åŒ–ï¼šç»“æ„ä½“--&gt;JSONæ ¼å¼çš„å­—ç¬¦ä¸²
    data, err := json.Marshal(c)
    if err != nil &#123;
        fmt.Println(&quot;json marshal failed&quot;)
        return
    &#125;
    fmt.Printf(&quot;json:%s\n&quot;, data)
    //JSONååºåˆ—åŒ–ï¼šJSONæ ¼å¼çš„å­—ç¬¦ä¸²--&gt;ç»“æ„ä½“
    str := `&#123;&quot;Title&quot;:&quot;101&quot;,&quot;Students&quot;:[&#123;&quot;ID&quot;:0,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu00&quot;&#125;,&#123;&quot;ID&quot;:1,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu01&quot;&#125;,&#123;&quot;ID&quot;:2,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu02&quot;&#125;,&#123;&quot;ID&quot;:3,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu03&quot;&#125;,&#123;&quot;ID&quot;:4,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu04&quot;&#125;,&#123;&quot;ID&quot;:5,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu05&quot;&#125;,&#123;&quot;ID&quot;:6,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu06&quot;&#125;,&#123;&quot;ID&quot;:7,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu07&quot;&#125;,&#123;&quot;ID&quot;:8,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu08&quot;&#125;,&#123;&quot;ID&quot;:9,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu09&quot;&#125;]&#125;`
    c1 := &amp;Class&#123;&#125;
    // Unmarshalå‡½æ•°æ˜¯å°†JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸ºç»“æ„ä½“ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„json.UnMarshal() å‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯å­—èŠ‚åˆ‡ç‰‡ï¼Œæ‰€ä»¥ç›¸å½“äºJSONæ ¼å¼çš„å­—èŠ‚åˆ‡ç‰‡è½¬åŒ–ä¸ºç»“æ„ä½“
    err = json.Unmarshal([]byte(str), c1)
    if err != nil &#123;
        fmt.Println(&quot;json unmarshal failed!&quot;)
        return
    &#125;
    // æˆ–è€…ä½¿ç”¨NewDecoder().Decode()ï¼Œè¿™é‡Œåªæ˜¯ç®€å•äº†è§£
    // 	if err := json.NewDecoder([]byte(str)).Decode(&amp;Class); err != nil &#123;
    // 		log.Fatalln(err)
    // 	&#125;
    fmt.Printf(&quot;%#v\n&quot;, c1)
&#125;
</code></pre>
<h2 id="2-2-Marshalå‡½æ•°â€”â€”å°†æ•°æ®ç¼–ç æˆJSONå­—ç¬¦ä¸²"><a href="#2-2-Marshalå‡½æ•°â€”â€”å°†æ•°æ®ç¼–ç æˆJSONå­—ç¬¦ä¸²" class="headerlink" title="2.2 Marshalå‡½æ•°â€”â€”å°†æ•°æ®ç¼–ç æˆJSONå­—ç¬¦ä¸²"></a>2.2 Marshalå‡½æ•°â€”â€”å°†æ•°æ®ç¼–ç æˆJSONå­—ç¬¦ä¸²</h2><p><code>Marshal</code>å‡½æ•°æ˜¯å°†Goè¯­è¨€çš„ç±»å‹è½¬åŒ–ä¸ºJSONï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ <code>json.Marshal()</code> å‡½æ•°è¿”å›çš„æ˜¯å­—èŠ‚åˆ‡ç‰‡ã€‚</p>
<p>æ ¼å¼ï¼š</p>
<pre><code class="go">func Marshal(v interface&#123;&#125;) ([]byte, error)
// væ˜¯è¦è¿›è¡Œè½¬åŒ–çš„Goè¯­è¨€çš„ç±»å‹æ•°æ®
// []byteæ˜¯è¢«è½¬åŒ–åçš„jsonå­—èŠ‚åˆ‡ç‰‡æ•°æ®
</code></pre>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="go">package main

import (
    &quot;encoding/json&quot;
    &quot;fmt&quot;
)

type Stu struct &#123;
    Name  string `json:&quot;name&quot;`
    Age   int
    HIgh  bool
    sex   string
    Class *Class `json:&quot;class&quot;`
&#125;

type Class struct &#123;
    Name  string
    Grade int
&#125;

func main() &#123;
    //å®ä¾‹åŒ–ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨äºç”Ÿæˆjsonå­—ç¬¦ä¸²
    stu := Stu&#123;
        Name: &quot;å¼ ä¸‰&quot;,
        Age:  18,
        HIgh: true,
        sex:  &quot;ç”·&quot;,
    &#125;

    //æŒ‡é’ˆå˜é‡
    cla := new(Class)
    cla.Name = &quot;1ç­&quot;
    cla.Grade = 3
    stu.Class = cla

    //Marshalå¤±è´¥æ—¶err!=nil
    jsonStu, err := json.Marshal(stu)
    if err != nil &#123;
        fmt.Println(&quot;ç”Ÿæˆjsonå­—ç¬¦ä¸²é”™è¯¯&quot;)
    &#125;

    //jsonStuæ˜¯[]byteç±»å‹ï¼Œè½¬åŒ–æˆstringç±»å‹ä¾¿äºæŸ¥çœ‹
    fmt.Println(string(jsonStu))	// &#123;&quot;name&quot;:&quot;å¼ ä¸‰&quot;,&quot;Age&quot;:18,&quot;HIgh&quot;:true,&quot;class&quot;:&#123;&quot;Name&quot;:&quot;1ç­&quot;,&quot;Grade&quot;:3&#125;&#125;
&#125;
</code></pre>
<p>ä»ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>åªè¦æ˜¯å¯å¯¼å‡ºæˆå‘˜ï¼ˆå˜é‡é¦–å­—æ¯å¤§å†™ï¼‰ï¼Œéƒ½å¯ä»¥è½¬æˆJSONã€‚å› æˆå‘˜å˜é‡sexï¼ˆå˜é‡é¦–å­—æ¯å°å†™ï¼‰æ˜¯ä¸å¯å¯¼å‡ºçš„ï¼Œæ•…æ— æ³•è½¬æˆJSONã€‚</li>
<li>å¦‚æœå˜é‡æ‰“ä¸Šäº†JSONæ ‡ç­¾ï¼Œå¦‚Nameæ—è¾¹çš„ <code>json:&quot;name&quot;</code> ï¼Œé‚£ä¹ˆè½¬åŒ–æˆçš„<code>json key</code>å°±ç”¨è¯¥æ ‡ç­¾<code>name</code>ï¼Œå¦åˆ™å–å˜é‡åä½œä¸º<code>key</code>ï¼Œå¦‚<code>Age</code>ï¼Œ<code>HIgh</code>ã€‚</li>
<li><code>bool</code>ç±»å‹ä¹Ÿæ˜¯å¯ä»¥ç›´æ¥è½¬æ¢ä¸ºJSONçš„<code>value</code>å€¼ã€‚<code>Channel</code>ï¼Œ <code>complex</code> ä»¥åŠå‡½æ•°ä¸èƒ½è¢«ç¼–ç JSONå­—ç¬¦ä¸²ã€‚å½“ç„¶ï¼Œå¾ªç¯çš„æ•°æ®ç»“æ„ä¹Ÿä¸è¡Œï¼Œå®ƒä¼šå¯¼è‡´<code>marshal</code>é™·å…¥æ­»å¾ªç¯ã€‚</li>
<li>å¦‚æœæ˜¯<code>æŒ‡é’ˆå˜é‡</code>ï¼Œç¼–ç æ—¶è‡ªåŠ¨è½¬æ¢ä¸º<code>å®ƒæ‰€æŒ‡å‘çš„å€¼</code>ï¼Œå¦‚ä¸Šé¢ä¾‹å­çš„<code>cla</code>å˜é‡ï¼Œå½“ç„¶ï¼Œä¸ä¼ æŒ‡é’ˆï¼Œ<code>Stu struct</code>çš„æˆå‘˜<code>Class</code>å¦‚æœæ¢æˆ<code>Class struct</code>ç±»å‹ï¼Œæ•ˆæœä¹Ÿæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚åªä¸è¿‡æŒ‡é’ˆæ›´å¿«ï¼Œä¸”èƒ½èŠ‚çœå†…å­˜ç©ºé—´ã€‚</li>
<li>æœ€åï¼Œå¼ºè°ƒä¸€å¥ï¼šÂ·JSONç¼–ç æˆå­—ç¬¦ä¸²åå°±æ˜¯çº¯ç²¹çš„å­—ç¬¦ä¸²äº†ã€‚</li>
</ul>
<p>ä¸Šé¢çš„æˆå‘˜å˜é‡éƒ½æ˜¯å·²çŸ¥çš„ç±»å‹ï¼Œåªèƒ½æ¥æ”¶æŒ‡å®šçš„ç±»å‹ï¼Œæ¯”å¦‚<code>string</code>ç±»å‹çš„<code>Name</code>åªèƒ½èµ‹å€¼<code>string</code>ç±»å‹çš„æ•°æ®ã€‚ä½†æœ‰æ—¶ä¸ºäº†é€šç”¨æ€§ï¼Œæˆ–ä½¿ä»£ç ç®€æ´ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ç§ç±»å‹å¯ä»¥æ¥å—å„ç§ç±»å‹çš„æ•°æ®ï¼Œå¹¶è¿›è¡Œ<code>JSON</code>ç¼–ç ã€‚è¿™å°±ç”¨åˆ°äº†<code>interface&#123;&#125;</code>ç±»å‹ã€‚<code>Go</code>çš„æ¯ä¸€ç§ç±»å‹éƒ½å®ç°äº†è¯¥æ¥å£ã€‚å› æ­¤ï¼Œä»»ä½•å…¶ä»–ç±»å‹çš„æ•°æ®éƒ½å¯ä»¥èµ‹å€¼ç»™<code>interface&#123;&#125;</code>ç±»å‹ã€‚</p>
<pre><code class="go">package main

import (
    &quot;encoding/json&quot;
    &quot;fmt&quot;
)

type Stu struct &#123;
    Name  interface&#123;&#125; `json:&quot;name&quot;`
    Age   interface&#123;&#125;
    HIgh  interface&#123;&#125;
    sex   interface&#123;&#125;
    Class interface&#123;&#125; `json:&quot;class&quot;`
&#125;

type Class struct &#123;
    Name  string
    Grade int
&#125;

func main() &#123;
    //å®ä¾‹åŒ–ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨äºç”Ÿæˆjsonå­—ç¬¦ä¸²
    stu := Stu&#123;
        Name: &quot;å¼ ä¸‰&quot;,
        Age:  18,
        HIgh: true,
        sex:  &quot;ç”·&quot;,
    &#125;

    //æŒ‡é’ˆå˜é‡
    cla := new(Class)
    cla.Name = &quot;1ç­&quot;
    cla.Grade = 3
    stu.Class = cla

    //Marshalå¤±è´¥æ—¶err!=nil
    jsonStu, err := json.Marshal(stu)
    if err != nil &#123;
        fmt.Println(&quot;ç”Ÿæˆjsonå­—ç¬¦ä¸²é”™è¯¯&quot;)
    &#125;

    //jsonStuæ˜¯[]byteç±»å‹ï¼Œè½¬åŒ–æˆstringç±»å‹ä¾¿äºæŸ¥çœ‹
    fmt.Println(string(jsonStu)) // &#123;&quot;name&quot;:&quot;å¼ ä¸‰&quot;,&quot;Age&quot;:18,&quot;HIgh&quot;:true,&quot;class&quot;:&#123;&quot;Name&quot;:&quot;1ç­&quot;,&quot;Grade&quot;:3&#125;&#125;
&#125;
</code></pre>
<p>ä»ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œæ— è®ºæ˜¯<code>string</code>ï¼Œ<code>int</code>ï¼Œ<code>bool</code>ï¼Œè¿˜æ˜¯æŒ‡é’ˆç±»å‹ç­‰ï¼Œéƒ½å¯èµ‹å€¼ç»™<code>interface&#123;&#125;</code>ç±»å‹ï¼Œä¸”æ­£å¸¸ç¼–ç ï¼Œæ•ˆæœä¸å‰é¢çš„ä¾‹å­ä¸€æ ·ã€‚</p>
<h2 id="2-3-MarshalIndentå‡½æ•°â€”â€”å°†JSONå­—ç¬¦ä¸²æ ¼å¼åŒ–"><a href="#2-3-MarshalIndentå‡½æ•°â€”â€”å°†JSONå­—ç¬¦ä¸²æ ¼å¼åŒ–" class="headerlink" title="2.3 MarshalIndentå‡½æ•°â€”â€”å°†JSONå­—ç¬¦ä¸²æ ¼å¼åŒ–"></a>2.3 MarshalIndentå‡½æ•°â€”â€”å°†JSONå­—ç¬¦ä¸²æ ¼å¼åŒ–</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“<code>json</code>æ ¼å¼ä¸€èˆ¬æ˜¯ä¸‹é¢è¿™ç§æ ¼å¼ï¼š</p>
<pre><code class="json">&#123;
 &quot;user_id&quot;: 1,
 &quot;user_name&quot;: &quot;demo&quot;
&#125;
</code></pre>
<p>è€Œåœ¨ç”¨<code>Marshal</code>å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°è¾“å‡ºçš„æ˜¯ä¸€è¡Œ<code>json</code>å­—ç¬¦ä¸²ï¼Œå¹¶ä¸ç¾è§‚ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨<code>MarshalIndent</code>å‡½æ•°ï¼š</p>
<pre><code class="go">func MarshalIndent(v any, prefix, indent string) ([]byte, error)
# prefixè¡¨ç¤ºjsonæ¯ä¸€è¡Œéƒ½ä¼šè¾“å‡ºçš„å­—ç¬¦ä¸²
# indentè¡¨ç¤ºåœ¨prefixåŸºç¡€ä¸Šå†è¾“å‡º
</code></pre>
<p>ä¾‹å­ï¼š</p>
<pre><code class="go">package main
import (
    &quot;encoding/json&quot;
    &quot;fmt&quot;
)
func main() &#123;
    type User struct &#123;
        UserId   int    `json:&quot;user_id&quot;`
        UserName string `json:&quot;user_name&quot;`
    &#125;
    // è¾“å‡ºjsonæ ¼å¼
    u := User&#123;UserId: 1, UserName: &quot;demo&quot;&#125;
    j, _ := json.MarshalIndent(u, &quot;=&quot;, &quot;++&quot;)
    fmt.Println(string(j))
    // è¾“å‡ºå†…å®¹ï¼š
    // &#123;
    // =++&quot;user_id&quot;: 1,
    // =++&quot;user_name&quot;: &quot;demo&quot;
    // =&#125;
&#125;
</code></pre>
<h1 id="å-JSONä¸Mapã€structè½¬åŒ–"><a href="#å-JSONä¸Mapã€structè½¬åŒ–" class="headerlink" title="å JSONä¸Mapã€structè½¬åŒ–"></a>å JSONä¸Mapã€structè½¬åŒ–</h1><p>ä¾‹å¦‚æˆ‘ä»¬åœ¨çˆ¬è™«æ—¶ï¼Œå¯èƒ½ä¼šè·å–åˆ°çš„æ—¶<code>JSON</code>æ ¼å¼çš„æ•°æ®ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å°†å…¶è½¬åŒ–ä¸ºGoè¯­è¨€å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼Œæ‰èƒ½å¯¹<code>JSON</code>æ•°æ®å†…å®¹è¿›è¡Œæ“ä½œã€‚</p>
<h2 id="3-1-JSONä¸structè½¬åŒ–"><a href="#3-1-JSONä¸structè½¬åŒ–" class="headerlink" title="3.1 JSONä¸structè½¬åŒ–"></a>3.1 JSONä¸structè½¬åŒ–</h2><p><code>JSON</code>è½¬åŒ–ä¸º<code>struct</code>æœ‰ä¼ç§ï¼šæ™®é€š<code>JSON</code>ã€<code>JSON</code>å†…åµŒæ™®é€š<code>JSON</code>ã€<code>JSON</code>å†…åµŒæ•°ç»„<code>JSON</code>ã€<code>JSON</code>å†…åµŒå…·æœ‰åŠ¨æ€<code>Key</code>çš„<code>JSON</code>ã€ä½¿ç”¨ç©ºæ¥å£ã€‚</p>
<p><font color="red">æ€è·¯å°±æ˜¯åˆ›å»ºä¸€ä¸ªä¸<code>JSON</code>ä¸€æ ·æ ¼å¼çš„<code>struct</code>æ•°æ®ç±»å‹ï¼Œä½¿ç”¨<code>Unmarshal</code>å‡½æ•°å°†JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸ºç»“æ„ä½“ã€‚</font></p>
<h3 id="3-1-1-æ™®é€šJSON"><a href="#3-1-1-æ™®é€šJSON" class="headerlink" title="3.1.1 æ™®é€šJSON"></a>3.1.1 æ™®é€šJSON</h3><p>ç”±äºæ™®é€šJSONç»“æ„æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨åŸºæœ¬ç±»å‹ä½œä¸ºç»“æ„ä½“çš„å…ƒç´ å³å¯ã€‚</p>
<pre><code class="go">package main

import (
    &quot;encoding/json&quot;
    &quot;fmt&quot;
)

// Actress å¥³æ¼”å‘˜
// ä½¿ç”¨åŸºæœ¬ç±»å‹ä½œä¸ºç»“æ„ä½“çš„å…ƒç´ 
type Actress struct &#123;
    Name       string
    Birthday   string
    BirthPlace string
    Opus       []string
&#125;

func main() &#123;
    // æ™®é€šJSON
    jsonData := []byte(`&#123;
        &quot;name&quot;:&quot;è¿ªä¸½çƒ­å·´&quot;,
        &quot;birthday&quot;:&quot;1992-06-03&quot;,
        &quot;birthPlace&quot;:&quot;æ–°ç–†ä¹Œé²æœ¨é½å¸‚&quot;,
        &quot;opus&quot;:[
            &quot;ã€Šé˜¿å¨œå°”ç½•ã€‹&quot;,
            &quot;ã€Šé€†å…‰ä¹‹æ‹ã€‹&quot;,
            &quot;ã€Šå…‹æ‹‰æ‹äººã€‹&quot;
        ]
    &#125;`)

    var actress Actress
    // å› ä¸ºjson.UnMarshal() å‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯å­—èŠ‚åˆ‡ç‰‡ï¼Œæ‰€ä»¥éœ€è¦æŠŠJSONå­—ç¬¦ä¸²è½¬æ¢æˆå­—èŠ‚åˆ‡ç‰‡ã€‚
    err := json.Unmarshal(jsonData, &amp;actress)
    if err != nil &#123;
        fmt.Println(&quot;error:&quot;, err)
        return
    &#125;
    fmt.Printf(&quot;å§“åï¼š%s\n&quot;, actress.Name)
    fmt.Printf(&quot;ç”Ÿæ—¥ï¼š%s\n&quot;, actress.Birthday)
    fmt.Printf(&quot;å‡ºç”Ÿåœ°ï¼š%s\n&quot;, actress.BirthPlace)
    fmt.Println(&quot;ä½œå“ï¼š&quot;)
    for _, val := range actress.Opus &#123;
        fmt.Println(&quot;\t&quot;, val)
    &#125;
&#125;
</code></pre>
<h3 id="3-1-2-JSONå†…åµŒæ™®é€šJSON"><a href="#3-1-2-JSONå†…åµŒæ™®é€šJSON" class="headerlink" title="3.1.2 JSONå†…åµŒæ™®é€šJSON"></a>3.1.2 JSONå†…åµŒæ™®é€šJSON</h3><p>JSONå†…åµŒæ™®é€šJSONç»“æ„æ¯”è¾ƒç¨å¾®æ¯”è¾ƒå¤æ‚ï¼Œè¿™æ—¶å€™æˆ‘ä»¬æ ¹æ®JSONæ•°æ®å¯ä»¥çœ‹åˆ°JSONå…¶ä¸­ä¸€ä¸ªå…ƒç´ é‡Œé¢æ˜¯JSONï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸JSONåµŒå¥—å†…çš„JSONä¸€æ ·çš„<code>struct</code>æ•°æ®ç±»å‹ï¼Œå¦‚ä¸‹é¢ä¾‹å­ä¸­çš„<code>Opus</code>ï¼Œæ¥ç€åœ¨å®šä¹‰ä¸å¤–å›´JSONæ•°æ®ä¸€æ ·çš„<code>struct</code>æ•°æ®ç±»å‹ï¼Œå³ä¸‹é¢ä¾‹å­çš„<code>Actress</code>ã€‚</p>
<pre><code class="go">package main

import (
    &quot;encoding/json&quot;
    &quot;fmt&quot;
)

// Opus ä½œå“
type Opus struct &#123;
    Date  string
    Title string
&#125;

// Actress å¥³æ¼”å‘˜
type Actress struct &#123;
    Name       string
    Birthday   string
    BirthPlace string
    // å¯ä»¥çœ‹åˆ°Opusä¸æ˜¯Goè¯­è¨€ç®€å•çš„æ•°æ®ç±»å‹ï¼Œæ˜¯ä¸€ä¸ªOpusä½œå“ç»“æ„ä½“ç±»å‹
    // è¿™æ ·å°±ä¸JSONçš„å†…å®¹ä¸€è‡´äº†
    Opus Opus
&#125;

func main() &#123;
    // JSONåµŒå¥—æ™®é€šJSON
    jsonData := []byte(`&#123;
        &quot;name&quot;:&quot;è¿ªä¸½çƒ­å·´&quot;,
        &quot;birthday&quot;:&quot;1992-06-03&quot;,
        &quot;birthPlace&quot;:&quot;æ–°ç–†ä¹Œé²æœ¨é½å¸‚&quot;,
        &quot;opus&quot;: &#123;
            &quot;Date&quot;:&quot;2013&quot;,
            &quot;Title&quot;:&quot;ã€Šé˜¿å¨œå°”ç½•ã€‹&quot;
        &#125;
     &#125;`)
    var actress Actress
    err := json.Unmarshal(jsonData, &amp;actress)
    if err != nil &#123;
        fmt.Println(&quot;error:&quot;, err)
        return
    &#125;
    fmt.Printf(&quot;å§“åï¼š%s\n&quot;, actress.Name)
    fmt.Printf(&quot;ç”Ÿæ—¥ï¼š%s\n&quot;, actress.Birthday)
    fmt.Printf(&quot;å‡ºç”Ÿåœ°ï¼š%s\n&quot;, actress.BirthPlace)
    fmt.Println(&quot;ä½œå“ï¼š&quot;)
    fmt.Printf(&quot;\t%s:%s&quot;, actress.Opus.Date, actress.Opus.Title)
&#125;
</code></pre>
<h3 id="3-1-3-JSONå†…åµŒæ•°ç»„JSON"><a href="#3-1-3-JSONå†…åµŒæ•°ç»„JSON" class="headerlink" title="3.1.3 JSONå†…åµŒæ•°ç»„JSON"></a>3.1.3 JSONå†…åµŒæ•°ç»„JSON</h3><p>JSONå†…åµŒæ•°ç»„JSONï¼Œå¯ä»¥ç†è§£ä¸ºç»“æ„ä½“å†…åµŒä¸€ä¸ªç»“æ„ä½“åˆ‡ç‰‡ï¼Œå³JSONå†…åµŒæ™®é€šJSONä¸­çš„å†…åµŒç»“æ„ä½“æ”¹ä¸ºç»“æ„ä½“åˆ‡ç‰‡ã€‚</p>
<pre><code class="go">package main

import (
    &quot;encoding/json&quot;
    &quot;fmt&quot;
)

type Opus struct &#123;
    Date  string
    Title string
&#125;
type Actress struct &#123;
    Name       string
    Birthday   string
    BirthPlace string
    Opus       []Opus
&#125;

func main() &#123;
    // JSONåµŒå¥—æ•°ç»„JSON
    jsonData := []byte(`&#123;
        &quot;name&quot;:&quot;è¿ªä¸½çƒ­å·´&quot;,
        &quot;birthday&quot;:&quot;1992-06-03&quot;,
        &quot;birthPlace&quot;:&quot;æ–°ç–†ä¹Œé²æœ¨é½å¸‚&quot;,
        &quot;opus&quot;:[
            &#123;
                &quot;date&quot;:&quot;2013&quot;,
                &quot;title&quot;:&quot;ã€Šé˜¿å¨œå°”ç½•ã€‹&quot;
            &#125;,
            &#123;
                &quot;date&quot;:&quot;2014&quot;,
                &quot;title&quot;:&quot;ã€Šé€†å…‰ä¹‹æ‹ã€‹&quot;
            &#125;,
            &#123;
                &quot;date&quot;:&quot;2015&quot;,
                &quot;title&quot;:&quot;ã€Šå…‹æ‹‰æ‹äººã€‹&quot;
            &#125;
        ]
    &#125;`)
    var actress Actress
    err := json.Unmarshal(jsonData, &amp;actress)
    if err != nil &#123;
        fmt.Println(&quot;error:&quot;, err)
        return
    &#125;
    fmt.Printf(&quot;å§“åï¼š%s\n&quot;, actress.Name)
    fmt.Printf(&quot;ç”Ÿæ—¥ï¼š%s\n&quot;, actress.Birthday)
    fmt.Printf(&quot;å‡ºç”Ÿåœ°ï¼š%s\n&quot;, actress.BirthPlace)
    fmt.Println(&quot;ä½œå“ï¼š&quot;)
    for _, val := range actress.Opus &#123;
        fmt.Printf(&quot;\t%s - %s\n&quot;, val.Date, val.Title)
    &#125;
&#125;
</code></pre>
<h3 id="3-1-4-JSONå†…åµŒå…·æœ‰åŠ¨æ€Keyçš„JSON"><a href="#3-1-4-JSONå†…åµŒå…·æœ‰åŠ¨æ€Keyçš„JSON" class="headerlink" title="3.1.4 JSONå†…åµŒå…·æœ‰åŠ¨æ€Keyçš„JSON"></a>3.1.4 JSONå†…åµŒå…·æœ‰åŠ¨æ€Keyçš„JSON</h3><p>JSONå†…åµŒå…·æœ‰åŠ¨æ€Keyçš„JSONï¼Œæ˜¯ç”±äºJSONçš„Keyä¸èƒ½ç¡®å®šï¼Œï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>map</code>ç±»å‹ï¼Œæ¥æ„é€ è¿™ä¸ªåŠ¨æ€çš„Keyã€‚</p>
<pre><code class="go">package main

import (
    &quot;encoding/json&quot;
    &quot;fmt&quot;
)

// Opus ä½œå“
type Opus struct &#123;
    Type  string
    Title string
&#125;

// Actress å¥³æ¼”å‘˜
type Actress struct &#123;
    Name       string
    Birthday   string
    BirthPlace string
    Opus       map[string]Opus
&#125;

func main() &#123;
    // å¯ä»¥çœ‹åˆ°opusé‡Œé¢çš„2013ã€2014ç­‰Keyæ˜¯ä¸ç¡®å®šçš„ï¼Œä½†æ˜¯Keyç±»å‹éƒ½æ˜¯stringï¼Œè¿™æ—¶å€™æˆ‘ä»¬æ„é€ çš„Opusæ˜¯map[string]Opus
    jsonData := []byte(`&#123;
        &quot;name&quot;:&quot;è¿ªä¸½çƒ­å·´&quot;,
        &quot;birthday&quot;:&quot;1992-06-03&quot;,
        &quot;birthPlace&quot;:&quot;æ–°ç–†ä¹Œé²æœ¨é½å¸‚&quot;,
        &quot;opus&quot;:&#123;
            &quot;2013&quot;:&#123;
            &quot;Type&quot;:&quot;è¿‘ä»£é©å‘½å‰§&quot;,
            &quot;Title&quot;:&quot;ã€Šé˜¿å¨œå°”ç½•ã€‹&quot;
            &#125;,
            &quot;2014&quot;:&#123;
            &quot;Type&quot;:&quot;å¥‡å¹»å‰§&quot;,
            &quot;Title&quot;:&quot;ã€Šé€†å…‰ä¹‹æ‹ã€‹&quot;
            &#125;,
            &quot;2015&quot;:&#123;
                &quot;Type&quot;:&quot;çˆ±æƒ…å‰§&quot;,
                &quot;Title&quot;:&quot;ã€Šå…‹æ‹‰æ‹äººã€‹&quot;
            &#125;
        &#125;
    &#125;`)
    var actress Actress
    err := json.Unmarshal(jsonData, &amp;actress)
    if err != nil &#123;
        fmt.Println(&quot;error:&quot;, err)
        return
    &#125;
    fmt.Printf(&quot;å§“åï¼š%s\n&quot;, actress.Name)
    fmt.Printf(&quot;ç”Ÿæ—¥ï¼š%s\n&quot;, actress.Birthday)
    fmt.Printf(&quot;å‡ºç”Ÿåœ°ï¼š%s\n&quot;, actress.BirthPlace)
    fmt.Println(&quot;ä½œå“ï¼š&quot;)
    for index, value := range actress.Opus &#123;
        fmt.Printf(&quot;\tæ—¥æœŸï¼š%s\n&quot;, index)
        fmt.Printf(&quot;\t\tåˆ†ç±»ï¼š%s\n&quot;, value.Type)
        fmt.Printf(&quot;\t\tæ ‡é¢˜ï¼š%s\n&quot;, value.Title)
    &#125;
&#125;
</code></pre>
<h3 id="3-1-5-JSONå†…åµŒæ•°æ®ä¸æ˜ç¡®"><a href="#3-1-5-JSONå†…åµŒæ•°æ®ä¸æ˜ç¡®" class="headerlink" title="3.1.5 JSONå†…åµŒæ•°æ®ä¸æ˜ç¡®"></a>3.1.5 JSONå†…åµŒæ•°æ®ä¸æ˜ç¡®</h3><p>å½“JSONå†…åµŒä¸æ˜ç¡®ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸‹é¢çš„<code>map</code>ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ä½¿ç”¨ç©ºæ¥å£ã€‚</p>
<pre><code class="go">package main

import (
    &quot;encoding/json&quot;
    &quot;fmt&quot;
    &quot;reflect&quot;
)

// Actress å¥³æ¼”å‘˜
type Actress struct &#123;
    Name       string
    Birthday   string
    BirthPlace string
    Opus       map[string]interface&#123;&#125;
&#125;

func main() &#123;
    // å¯ä»¥çœ‹åˆ°opusé‡Œé¢çš„2013çš„å€¼æ˜¯ä¸ç¡®å®šçš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬æ„é€ çš„Opusæ˜¯map[string]interface&#123;&#125;
    jsonData := []byte(`&#123;
        &quot;name&quot;:&quot;è¿ªä¸½çƒ­å·´&quot;,
        &quot;birthday&quot;:&quot;1992-06-03&quot;,
        &quot;birthPlace&quot;:&quot;æ–°ç–†ä¹Œé²æœ¨é½å¸‚&quot;,
        &quot;opus&quot;:&#123;
            &quot;2013&quot;:1,
            &quot;2014&quot;:&#123;
            &quot;Type&quot;:&quot;å¥‡å¹»å‰§&quot;,
            &quot;Title&quot;:&quot;ã€Šé€†å…‰ä¹‹æ‹ã€‹&quot;
            &#125;,
            &quot;2015&quot;:&#123;
                &quot;Type&quot;:&quot;çˆ±æƒ…å‰§&quot;,
                &quot;Title&quot;:&quot;ã€Šå…‹æ‹‰æ‹äººã€‹&quot;
            &#125;
        &#125;
    &#125;`)
    var actress Actress
    err := json.Unmarshal(jsonData, &amp;actress)
    if err != nil &#123;
        fmt.Println(&quot;error:&quot;, err)
        return
    &#125;
    fmt.Printf(&quot;å§“åï¼š%s\n&quot;, actress.Name)
    fmt.Printf(&quot;ç”Ÿæ—¥ï¼š%s\n&quot;, actress.Birthday)
    fmt.Printf(&quot;å‡ºç”Ÿåœ°ï¼š%s\n&quot;, actress.BirthPlace)
    fmt.Println(&quot;ä½œå“ï¼š&quot;)
    for index, value := range actress.Opus &#123;
        fmt.Printf(&quot;\tæ—¥æœŸï¼š%s\n&quot;, index)
        // ç”±äºæ˜¯ç©ºæ¥å£ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°æ–­è¨€
        Type := reflect.TypeOf(value).Kind()
        // fmt.Println(Type)
        // ä½¿ç”¨switchå¯¹ç±»å‹è¿›è¡Œåˆ¤æ–­ä¸åŒç±»å‹è¾“å‡ºå†…å®¹æ ¼å¼
        switch Type &#123;
        case reflect.Float64:
            // æ–­è¨€è·å–å¯¹åº”å†…å®¹
            fmt.Printf(&quot;\t\tåˆ†ç±»ï¼š%v\n&quot;, value.(float64))
            fmt.Printf(&quot;\t\tæ ‡é¢˜ï¼š%v\n&quot;, value.(float64))
        case reflect.Map:
            fmt.Printf(&quot;\t\tåˆ†ç±»ï¼š%v\n&quot;, value.(map[string]interface&#123;&#125;)[&quot;Type&quot;])
            fmt.Printf(&quot;\t\tæ ‡é¢˜ï¼š%v\n&quot;, value.(map[string]interface&#123;&#125;)[&quot;Title&quot;])
        &#125;
    &#125;
&#125;
</code></pre>
<h2 id="3-2-JSONä¸mapè½¬åŒ–"><a href="#3-2-JSONä¸mapè½¬åŒ–" class="headerlink" title="3.2 JSONä¸mapè½¬åŒ–"></a>3.2 JSONä¸mapè½¬åŒ–</h2><p>å½“JSONå†…å®¹æ ¼å¼è¿‡äºå¤æ‚çš„æ—¶å€™ï¼Œå¯¹åº”çš„ç»“æ„ä½“<code>struct</code>ä¼šéšä¹‹å¢åŠ ï¼Œè¿™æ ·ä¼šå¢åŠ å¤§é‡çš„ä»£ç ã€‚æˆ‘ä»¬é‡‡ç”¨ä½¿ç”¨<code>map[string]interface&#123;&#125;</code>åŠ è½½JSONæ•°æ®ã€‚å°±æ˜¯ä½¿ç”¨<code>json.Unmarshal</code> å°† JSON è½¬åŒ–<code>map[string]interface&#123;&#125;</code>ã€‚</p>
<pre><code class="go">package main

import (
    &quot;encoding/json&quot;
    &quot;fmt&quot;
)

func main() &#123;
    // å®šä¹‰make(map[string]interface&#123;&#125;)
    r := make(map[string]interface&#123;&#125;)
    result := `&#123;&quot;data&quot;:&#123;&quot;flag&quot;:&quot;1&quot;,&quot;map&quot;:&#123;&quot;AOH&quot;:&quot;ä¸Šæµ·è™¹æ¡¥&quot;,&quot;GGQ&quot;:&quot;å¹¿å·ä¸œ&quot;,&quot;GZQ&quot;:&quot;å¹¿å·&quot;&#125;,&quot;result&quot;:[&quot;1&quot;,&quot;sas&quot;,1,&quot;opopijh&quot;]&#125;&#125;`
    // è°ƒç”¨æ ‡å‡†åº“encoding/jsonçš„Unmarshal
    // å°†JSONæ•°æ®ï¼ˆJSONä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºï¼‰è½¬æ¢æˆ[]byteï¼Œå¹¶å°†æ•°æ®åŠ è½½åˆ°å¯¹è±¡rçš„å†…å­˜åœ°å€
    json.Unmarshal([]byte(result), &amp;r)
    // r[&quot;data&quot;]æ˜¯è¯»å–JSONæœ€å¤–å±‚çš„key,å³data
    // å¦‚æœåµŒå¥—JSONæ•°æ®ï¼Œåˆ™ä½¿ç”¨map[string]interface&#123;&#125;è¯»å–ä¸‹ä¸€å±‚çš„JSONæ•°æ®
    // å¦‚è¯»å–keyä¸ºdataé‡Œé¢åµŒå¥—çš„result,å³ï¼šr[&quot;data&quot;].(map[string]interface&#123;&#125;)[&quot;result&quot;]
    // å¦‚æœJSONçš„æŸä¸ªkeyçš„æ•°æ®ä»¥æ•°ç»„è¡¨ç¤ºï¼Œåˆ™ä½¿ç”¨([]interface&#123;&#125;)[index]è¯»å–æ•°ç»„ä¸­æŸä¸ªæ•°æ®ã€‚
    // å¦‚è¯»å–keyä¸ºresultçš„ç¬¬å››ä¸ªæ•°æ®ï¼šr[&quot;data&quot;].(map[string]interface&#123;&#125;)[&quot;result&quot;].([]interface&#123;&#125;)[3]
    fmt.Println(r[&quot;data&quot;].(map[string]interface&#123;&#125;)[&quot;result&quot;].([]interface&#123;&#125;)[3])
&#125;
</code></pre>
<ul>
<li>è¿™é‡Œçš„é€»è¾‘å°±æ˜¯<code>r[&quot;data&quot;]</code>è·å–çš„æ˜¯<code>&#123;&quot;flag&quot;:&quot;1&quot;,&quot;map&quot;:&#123;&quot;AOH&quot;:&quot;ä¸Šæµ·è™¹æ¡¥&quot;,&quot;GGQ&quot;:&quot;å¹¿å·ä¸œ&quot;,&quot;GZQ&quot;:&quot;å¹¿å·&quot;&#125;,&quot;result&quot;:[&quot;1&quot;,&quot;sas&quot;,1,&quot;opopijh&quot;]&#125;</code></li>
<li>è€Œ <code>r[&quot;data&quot;].(map[string]interface&#123;&#125;)[&quot;result&quot;]</code>ä¸­<code>(map[string]interface&#123;&#125;)[&quot;result&quot;]</code>æ„æ€æ˜¯ä¸‹ä¸€ä¸ªè¦è·å–çš„å…ƒç´ æ˜¯<code>(map[string]interface&#123;&#125;)</code>ï¼Œè·å–çš„å€¼æ˜¯<code>[&quot;1&quot;,&quot;sas&quot;,1,&quot;opopijh&quot;]</code></li>
<li>æ¥ç€<code>r[&quot;data&quot;].(map[string]interface&#123;&#125;)[&quot;result&quot;].([]interface&#123;&#125;)[3]</code>æ„æ€æ˜¯ä¸‹ä¸€ä¸ªè¦è·å–çš„å…ƒç´ ç±»å‹æ˜¯<code>([]interface&#123;&#125;)</code>ï¼Œè·å–çš„å€¼æ˜¯<code>opopijh</code>ã€‚</li>
</ul>
<h2 id="3-3-é€‰æ‹©structè¿˜æ˜¯mapï¼Ÿ"><a href="#3-3-é€‰æ‹©structè¿˜æ˜¯mapï¼Ÿ" class="headerlink" title="3.3 é€‰æ‹©structè¿˜æ˜¯mapï¼Ÿ"></a>3.3 é€‰æ‹©structè¿˜æ˜¯mapï¼Ÿ</h2><p>å¯¹äºJSONè½¬åŒ–ï¼Œæ˜¯é€‰æ‹©<code>struct</code>è¿˜æ˜¯<code>map</code>ï¼Ÿä¸ªäººè§‰å¾—æ ¹æ®æƒ…å†µå†³å®šï¼Œå¦‚æœæ•°æ®é‡ä¸å¤§JSONåµŒå¥—ä¸å¤æ‚æˆ–è€…æ˜¯JSONçš„é€»è¾‘æ¸…æ™°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>struct</code>ï¼Œè€ŒJSONåµŒå¥—å¤æ‚ï¼Œé€»è¾‘ä¸ç¡®å®šï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨<code>map</code>ï¼Œä½†æ˜¯ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œä½¿ç”¨åå°„ï¼Œåå°„ä¼šæ‹‰ä½ç¨‹åºæ‰§è¡Œæ•ˆç‡ã€‚ä¸ªäººè€Œè¨€ï¼Œæ›´å€¾å‘äºä½¿ç”¨<code>struct</code>ï¼Œå› ä¸º<code>struct</code>å¯ä»¥é…å¥—ç©ºæ¥å£ï¼Œå¯¹ä¸ç¡®å®šçš„ç±»å‹è¿›è¡ŒåŒ¹é…ã€‚</p>
<p>æ›´å¤šå…³äºJSONçš„ä»‹ç»å¯ä»¥çœ‹è¿™ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/wowenlong/article/details/113571853">goè¯­è¨€:jsonè½¬æ¢æ€»ç»“</a></li>
<li><a target="_blank" rel="noopener" href="https://studygolang.com/articles/20923">GOå°çŸ¥è¯†ä¹‹å®ä¾‹æ¼”ç¤º json å¦‚ä½•è½¬åŒ–ä¸º map å’Œ struct</a></li>
</ul>

        </div>
        
        
        <div id="comment">
            <div id="giscus-container" class="giscus"></div>
        </div>
        
    </div>
    
    <div id="article-card">
        <div id="card-style">
    <div id="card-div" class="card-cls">
        <div class="avatar">
            <img src="/images/f6e2b991f74bfd7b88c3ab1a3d513b94.jpg" alt="avatar" />
        </div>
        <div class="name">å°C&amp;å¤©å¤©</div>
        <div class="description">
            <p>ä¿®å­¦å‚¨èƒ½ å…ˆåšåæ¸Š</p>

        </div>
        
        <div class="icon-links">
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="https://github.com/A7cc">
                    <i class="fa-brands fa-github fa-fw"></i>
                </a>
            </span>
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="https://www.qq.com/">
                    <i class="fa-brands fa-qq fa-fw"></i>
                </a>
            </span>
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="https://www.weibo.com/">
                    <i class="fa-brands fa-weibo fa-fw"></i>
                </a>
            </span>
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="https://google.com/">
                    <i class="fa-brands fa-google fa-fw"></i>
                </a>
            </span>
            
        </div>
        
        
        <div class="friend-links">
            
            <span class="friend-link">
                <a target="_blank" rel="noopener" href="http://www.wgs6km.top/">kyrieee</a>
            </span>
            
            <span class="friend-link">
                <a target="_blank" rel="noopener" href="https://tonyd0g.gitee.io/">tonyd0g</a>
            </span>
            
            <span class="friend-link">
                <a target="_blank" rel="noopener" href="https://ruyueattention.github.io/">ruyueattention</a>
            </span>
            
        </div>
        
    </div>
    
    <!-- <br /> -->
    <!-- ç›®å½• -->
    <!-- 
    <div id="card-div">
        <div id="toc" class="toc-article">
            <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A3%B9-JSON%E5%BA%8F%E5%88%97%E5%8C%96%E4%BB%8B%E7%BB%8D"><span class="toc-text">å£¹ JSONåºåˆ—åŒ–ä»‹ç»</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B4%B0-JSON%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%87%BD%E6%95%B0"><span class="toc-text">è´° JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–å‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-Unmarshal%E5%87%BD%E6%95%B0%E2%80%94%E2%80%94JSON%E6%A0%BC%E5%BC%8F%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E5%8C%96%E4%B8%BA%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-text">2.1 Unmarshalå‡½æ•°â€”â€”JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸ºç»“æ„ä½“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-Marshal%E5%87%BD%E6%95%B0%E2%80%94%E2%80%94%E5%B0%86%E6%95%B0%E6%8D%AE%E7%BC%96%E7%A0%81%E6%88%90JSON%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">2.2 Marshalå‡½æ•°â€”â€”å°†æ•°æ®ç¼–ç æˆJSONå­—ç¬¦ä¸²</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-MarshalIndent%E5%87%BD%E6%95%B0%E2%80%94%E2%80%94%E5%B0%86JSON%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-text">2.3 MarshalIndentå‡½æ•°â€”â€”å°†JSONå­—ç¬¦ä¸²æ ¼å¼åŒ–</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%81-JSON%E4%B8%8EMap%E3%80%81struct%E8%BD%AC%E5%8C%96"><span class="toc-text">å JSONä¸Mapã€structè½¬åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-JSON%E4%B8%8Estruct%E8%BD%AC%E5%8C%96"><span class="toc-text">3.1 JSONä¸structè½¬åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-%E6%99%AE%E9%80%9AJSON"><span class="toc-text">3.1.1 æ™®é€šJSON</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-JSON%E5%86%85%E5%B5%8C%E6%99%AE%E9%80%9AJSON"><span class="toc-text">3.1.2 JSONå†…åµŒæ™®é€šJSON</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-3-JSON%E5%86%85%E5%B5%8C%E6%95%B0%E7%BB%84JSON"><span class="toc-text">3.1.3 JSONå†…åµŒæ•°ç»„JSON</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-4-JSON%E5%86%85%E5%B5%8C%E5%85%B7%E6%9C%89%E5%8A%A8%E6%80%81Key%E7%9A%84JSON"><span class="toc-text">3.1.4 JSONå†…åµŒå…·æœ‰åŠ¨æ€Keyçš„JSON</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-5-JSON%E5%86%85%E5%B5%8C%E6%95%B0%E6%8D%AE%E4%B8%8D%E6%98%8E%E7%A1%AE"><span class="toc-text">3.1.5 JSONå†…åµŒæ•°æ®ä¸æ˜ç¡®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-JSON%E4%B8%8Emap%E8%BD%AC%E5%8C%96"><span class="toc-text">3.2 JSONä¸mapè½¬åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E9%80%89%E6%8B%A9struct%E8%BF%98%E6%98%AFmap%EF%BC%9F"><span class="toc-text">3.3 é€‰æ‹©structè¿˜æ˜¯mapï¼Ÿ</span></a></li></ol></li></ol>
        </div>    
    </div>
     -->
</div>

<div id="card-style-fun">
    
    <br />
    <!-- ä»Šæ—¥è¯—å¥ -->
    <div id="card-div">
        <div class="good-sentence">
            <div class="toolio">
                <div class="circle"><span class="red"></span></div>
                <div class="circle"><span class="yellow"></span></div>
                <div class="circle"><span class="green"></span></div>
                <div class="circle"><span class="text">ä»Šæ—¥è¯—å¥</span></div>
            </div>
            <div class="sentence">
                <div id="sentenceid" onload="getsentence();"></div>
            </div>
        </div>
    </div>
    <br />
    <!-- æ—¥æœŸä¿¡æ¯ -->
    <div id="card-div">
        <img src="//api.vvhan.com/api/ipCard?tip=A7cc" width="300" height="180">
    </div>
    
</div>



    </div>
    
</div>
                <!-- é¡µè„š -->
                <footer id="footer">
    <div id="footer-wrap">
        <div>
            <span id="timeDate">è½½å…¥å¤©æ•°...</span><span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
            <script>
                var now = new Date(); 
                function createtime() { 
                    var grt= new Date("07/10/2022 00:00:00");
                    now.setTime(now.getTime()+250); 
                    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
                    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
                    if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
                    mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
                    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
                    snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
                    document.getElementById("timeDate").innerHTML = "å·²è¿è¡Œ "+dnum+" å¤© "; 
                    document.getElementById("times").innerHTML = hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’"; 
                } 
            setInterval("createtime()",250);
            </script>
        </div>
        <div>
            &copy;
            2022 - 2023 å°Câ™¥å¤©å¤©
            <span class="footer-icon">
                <i class="fa-brands fa-github fa-fw"></i>
            </span>
            &commat;å°C&amp;å¤©å¤©
        </div>
        <div>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX</a> 
        </div>
        
    </div>
</footer>

            </div>
            <!-- ç®€å•çš„ç‚¹å‡»å›¾ç‰‡æ”¾å¤§ç¼©å°çš„é¢„è§ˆ -->
            
            <div name="fade">
                <div id="preview" ref="preview" v-show="previewShow">
                    <img id="preview-content" ref="previewContent" />
                </div>
            </div>
            
        </div>
        <!-- çœ‹æ¿å¨˜ -->
        
        <div id="L2dCanvas"></div>
        <script src="/js/lib/live2d.min.js"></script>
        <!-- è®¾ç½®éšæœºæ¨¡æ¿ -->
        
        <script>
            var v = new Viewer({
                basePath: "/model",
                role: "genaisennao_2",
                mobile: true,
            });
        </script>
        
        <!-- è¯—å¥ -->
        
        <script>
            // // æ¯éš”10åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡getsentenceè¿™ä¸ªå‡½æ•°
            window.setInterval(getsentence, 100*60*5);
            function getsentence() {
                // è¿™é‡Œæ²¡æœ‰è€ƒè™‘IEæµè§ˆå™¨ï¼Œå¦‚æœéœ€è¦æ‹©ifåˆ¤æ–­åŠ 
                var xhr = new XMLHttpRequest();  
                xhr.open('GET', "https://zj.v.api.aa1.cn/api/wenan-shici/?type=json",true);
                xhr.send(JSON.stringify(null));
                xhr.onreadystatechange = function () {
                    if (xhr.status === 200 && xhr.readyState === 4) {
                        //jså¤„ç†æ•°æ®
                        // xhr.responseText.match(/content":(".+?")/g)
                        getdata = JSON.parse(xhr.responseText).msg;
                    }else{
                        getdata = "é•¿é£ç ´æµªä¼šæœ‰æ—¶ï¼Œç›´æŒ‚äº‘å¸†æµæ²§æµ·ã€‚â€”â€”æç™½ã€Šè¡Œè·¯éš¾ã€‹";
                    }
                    document.getElementById("sentenceid").innerHTML = getdata;
                }
            }
            window.onload = getsentence;
        </script>
        
        <!-- ç‚¹å‡» -->
        <script>
            let body = document.getElementsByTagName('body')[0];
            body.addEventListener('click', (e) => {
                let contentArr = ['âœŠ','ğŸ˜˜','ğŸ˜','ğŸ˜Š','ğŸ˜­','ğŸ˜¡','ğŸ˜‹','ğŸ‘','ğŸ·','ğŸ˜±','ğŸ’·','ğŸ’µ','Ã—','ğŸ†—','â„–','â­','ğŸŒ™','â™¥','ğŸ’´','â˜€','ğŸ','ğŸ‚','ğŸ','âˆš'];
                let randomNum = function (n) {
                    return Math.floor(Math.random() * n)
                }
                let span = document.createElement('span');
                span.innerHTML = `${contentArr[randomNum(contentArr.length)]}`;
                span.style.color = `rgb(${randomNum(256)},${randomNum(256)},${randomNum(256)})`;
                span.style.position = 'absolute';
                span.style.top = `${e.pageY}px`;
                span.style.left = `${e.pageX}px`;
                span.style.transition = 'all 1s ease';
                span.style.zIndex = 20000;
                body.appendChild(span)
                setTimeout(()=>{
                    span.style.top = span.offsetTop - 100 + 'px';
                    span.style.opacity = 0;
                    setTimeout(()=>{span.remove()},700)
                },0)
            })
        </script>
        <!-- æµæ˜ŸèƒŒæ™¯ç‰¹æ•ˆ -->
        
        <canvas id="background" style="position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:-1"></canvas>
        <script src="/js/meteorbackground.js"></script>
        
        <script src="/js/main.js"></script>
    </body>
</html>
