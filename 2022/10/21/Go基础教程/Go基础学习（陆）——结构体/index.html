
<!DOCTYPE html>
<html lang="zh-Hans">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
        <title>GoåŸºç¡€å­¦ä¹ ï¼ˆé™†ï¼‰â€”â€”ç»“æ„ä½“ | å°Câ™¥å¤©å¤©</title>
        <meta name="author" content="å°C&å¤©å¤©">
        <meta name="description" content="^v^">
        <meta name="keywords" content="">
        <link rel="icon" href="/images/icon.jpg">
        <script src="https://cdn.staticfile.org/instant.page/5.1.0/instantpage.min.js" type="module"></script>
        <script src="https://cdn.staticfile.org/font-awesome/6.1.1/js/all.min.js"></script>
        <link rel="stylesheet" href="/css/fonts.min.css">
        <link rel="stylesheet" href="/css/particlex.css">
        <link rel="stylesheet" href="/css/main.css">
        <script src="https://cdn.staticfile.org/vue/3.2.33/vue.global.prod.min.js"></script>
        <script src="https://cdn.staticfile.org/pixi.js/4.6.1/pixi.min.js"></script>
    <meta name="generator" content="Hexo 6.2.0"></head>
    <body>
        <div id="loading" style="height:100vh;width:100vw;position:fixed;display:flex;z-index:200;justify-content:space-between;background:#fff;transition:opacity 0.3s ease-out"><div style="position:fixed;height:100vh;width:100vw;display:flex;justify-content:center;align-items:center"><div id="loadcontent" style="width:30vmin;height:30vmin;padding:60px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px #dd20dd;text-align:center"><div><h2>LOADING...</h2><p style="word-break:keep-all">æ­£åœ¨åŠ è½½</p><div><img alt="loading" src="/images/afde9fa65a5742a90b51d6e1211e841e.gif"></div></div></div></div></div>
        <div id="layout">
            <i data-fa-symbol="calendar-solid" class="fa-solid fa-calendar fa-fw"></i>
            <i data-fa-symbol="bookmark-solid" class="fa-solid fa-bookmark fa-fw"></i>
            <i data-fa-symbol="tags-solid" class="fa-solid fa-tags fa-fw"></i>
            <transition name="into">
                <div v-show="show_page" style="display: -not-none">
                    <div id="menu_show">
                         
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">å°Câ™¥å¤©å¤©</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;ä¸»é¡µ</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;å…³äº</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;æ–‡ç« </span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;åˆ†ç±»</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;æ ‡ç­¾</span>
        </a>
        
    </div>
    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div class="curtain" @click="menu_show = !menu_show" v-show="menu_show"></div>
        <div :class="'title'" @click="menu_show = !menu_show">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;å°Câ™¥å¤©å¤©</span>
        </div>
        <transition name="slide">
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-house fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">ä¸»é¡µ</div>
                </div>
            </a>
            
            <a href="/about">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-id-card fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">å…³äº</div>
                </div>
            </a>
            
            <a href="/archives">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-box-archive fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">æ–‡ç« </div>
                </div>
            </a>
            
            <a href="/categories">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-bookmark fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">åˆ†ç±»</div>
                </div>
            </a>
            
            <a href="/tags">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-tags fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">æ ‡ç­¾</div>
                </div>
            </a>
            
        </div>
        </transition>
    </div>
</nav>
                    </div>
                    <div id="main">
                        
<div class="article">
    <div>
        <h1>GoåŸºç¡€å­¦ä¹ ï¼ˆé™†ï¼‰â€”â€”ç»“æ„ä½“ </h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <svg class="fa-icon"><use xlink:href="#calendar-solid"></use></svg>
            </span>
            2022/10/21
        </span>
        
        <span class="category">
            <a href="/categories/GoåŸºç¡€æ•™ç¨‹">
                <span class="icon">
                    <svg class="fa-icon"><use xlink:href="#bookmark-solid"></use></svg>
                </span>
                GoåŸºç¡€æ•™ç¨‹
            </a>
        </span>
        
        
        <span class="tags">
            <span class="icon">
                <svg class="fa-icon"><use xlink:href="#tags-solid"></use></svg>
            </span>
            
            <span class="tag">
                
                <a href="/tags/Go" style="color: #03a9f4">
                    Go
                </a>
            </span>
            
            <span class="tag">
                
                <a href="/tags/å¼€å‘" style="color: #00a596">
                    å¼€å‘
                </a>
            </span>
            
        </span>
        
    </div>
    <div class="content" v-pre>
        <h1 id="å£¹-ä»‹ç»"><a href="#å£¹-ä»‹ç»" class="headerlink" title="å£¹ ä»‹ç»"></a>å£¹ ä»‹ç»</h1><p>Goè¯­è¨€ä¸­çš„åŸºç¡€æ•°æ®ç±»å‹å¯ä»¥è¡¨ç¤ºä¸€äº›äº‹ç‰©çš„åŸºæœ¬å±æ€§ï¼Œä½†æ˜¯å½“æˆ‘ä»¬æƒ³è¡¨è¾¾ä¸€ä¸ªäº‹ç‰©çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å±æ€§æ—¶ï¼Œè¿™æ—¶å€™å†ç”¨å•ä¸€çš„åŸºæœ¬æ•°æ®ç±»å‹æ˜æ˜¾å°±æ— æ³•æ»¡è¶³éœ€æ±‚äº†ï¼ŒGoè¯­è¨€æä¾›äº†ä¸€ç§è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå¯ä»¥å°è£…å¤šä¸ªåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆ<strong>è¿™æ˜¯æ•°ç»„ä¸ç»“æ„ä½“åŒºåˆ«</strong>ï¼‰ï¼Œè¿™ç§æ•°æ®ç±»å‹å«<strong>ç»“æ„ä½“</strong>ï¼Œè‹±æ–‡åç§°<code>struct</code>ã€‚ </p>
<span id="more"></span>
<p>ç»“æ„ä½“æ˜¯ç”±ä¸€ç³»åˆ—å…·æœ‰ç›¸åŒç±»å‹æˆ–ä¸åŒç±»å‹çš„æ•°æ®æ„æˆçš„æ•°æ®é›†åˆã€‚<font color="red">Goè¯­è¨€å†…ç½®çš„åŸºç¡€æ•°æ®ç±»å‹æ˜¯ç”¨æ¥æè¿°ä¸€ä¸ªå€¼çš„ï¼Œè€Œç»“æ„ä½“æ˜¯ç”¨æ¥æè¿°ä¸€ç»„å€¼çš„</font>ã€‚ç»“æ„ä½“è¡¨ç¤ºä¸€é¡¹è®°å½•ï¼Œæ¯”å¦‚ä¿å­˜å›¾ä¹¦é¦†çš„ä¹¦ç±è®°å½•ï¼Œæ¯æœ¬ä¹¦æœ‰ä»¥ä¸‹å±æ€§ï¼š</p>
<ul>
<li>Title ï¼šæ ‡é¢˜</li>
<li>Author ï¼š ä½œè€…</li>
<li>Subjectï¼šå­¦ç§‘</li>
<li>IDï¼šä¹¦ç±ID</li>
</ul>
<p>è¿™äº›éƒ½å¯ä»¥ç”¨ç»“æ„ä½“åŒ…è£…èµ·æ¥ã€‚åœ¨Goè¯­è¨€ä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œä¹Ÿä¸æ”¯æŒç±»çš„ç»§æ‰¿ç­‰é¢å‘å¯¹è±¡çš„æ¦‚å¿µã€‚Goè¯­è¨€ä¸­é€šè¿‡ç»“æ„ä½“çš„å†…åµŒå†é…åˆæ¥å£æ¯”é¢å‘å¯¹è±¡å…·æœ‰æ›´é«˜çš„æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚</p>
<h1 id="è´°-ç±»å‹åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹"><a href="#è´°-ç±»å‹åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹" class="headerlink" title="è´° ç±»å‹åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹"></a>è´° ç±»å‹åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹</h1><h2 id="2-1-è‡ªå®šä¹‰ç±»å‹"><a href="#2-1-è‡ªå®šä¹‰ç±»å‹" class="headerlink" title="2.1 è‡ªå®šä¹‰ç±»å‹"></a>2.1 è‡ªå®šä¹‰ç±»å‹</h2><p>åœ¨Goè¯­è¨€ä¸­æœ‰ä¸€äº›åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œå¦‚<code>string</code>ã€<code>æ•´å‹</code>ã€<code>æµ®ç‚¹å‹</code>ã€<code>å¸ƒå°”</code>ç­‰æ•°æ®ç±»å‹ï¼Œ Goè¯­è¨€ä¸­å¯ä»¥ä½¿ç”¨<code>type</code>å…³é”®å­—æ¥å®šä¹‰è‡ªå®šä¹‰ç±»å‹ã€‚</p>
<p>è‡ªå®šä¹‰ç±»å‹æ˜¯å®šä¹‰äº†ä¸€ä¸ªå…¨æ–°çš„ç±»å‹ã€‚æˆ‘ä»¬å¯ä»¥åŸºäºå†…ç½®çš„åŸºæœ¬ç±»å‹å®šä¹‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡structå®šä¹‰ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="go">//å°†MyIntå®šä¹‰ä¸ºintç±»å‹
type MyInt int
</code></pre>
<p>é€šè¿‡<code>type</code>å…³é”®å­—çš„å®šä¹‰ï¼Œ<code>MyInt</code>å°±æ˜¯ä¸€ç§æ–°çš„ç±»å‹ï¼Œå®ƒå…·æœ‰<code>int</code>çš„ç‰¹æ€§ã€‚</p>
<h2 id="2-2-ç±»å‹åˆ«å"><a href="#2-2-ç±»å‹åˆ«å" class="headerlink" title="2.2 ç±»å‹åˆ«å"></a>2.2 ç±»å‹åˆ«å</h2><p>ç±»å‹åˆ«åæ˜¯<code>Go1.9</code>ç‰ˆæœ¬æ·»åŠ çš„æ–°åŠŸèƒ½ã€‚ç±»å‹åˆ«åè§„å®šï¼šTypeAliasåªæ˜¯Typeçš„åˆ«åï¼Œæœ¬è´¨ä¸ŠTypeAliasä¸Typeæ˜¯åŒä¸€ä¸ªç±»å‹ã€‚å°±åƒä¸€ä¸ªå­©å­å°æ—¶å€™æœ‰å°åã€ä¹³åï¼Œä¸Šå­¦åç”¨å­¦åï¼Œè‹±è¯­è€å¸ˆåˆä¼šç»™ä»–èµ·è‹±æ–‡åï¼Œä½†è¿™äº›åå­—éƒ½æŒ‡çš„æ˜¯ä»–æœ¬äººã€‚</p>
<pre><code class="go">type TypeAlias = Type
</code></pre>
<p>æˆ‘ä»¬ä¹‹å‰è§è¿‡çš„<code>rune</code>å’Œ<code>byte</code>å°±æ˜¯ç±»å‹åˆ«åï¼Œä»–ä»¬çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="go">type byte = uint8
type rune = int32
</code></pre>
<h2 id="2-3-ç±»å‹å®šä¹‰å’Œç±»å‹åˆ«åçš„åŒºåˆ«"><a href="#2-3-ç±»å‹å®šä¹‰å’Œç±»å‹åˆ«åçš„åŒºåˆ«" class="headerlink" title="2.3 ç±»å‹å®šä¹‰å’Œç±»å‹åˆ«åçš„åŒºåˆ«"></a>2.3 ç±»å‹å®šä¹‰å’Œç±»å‹åˆ«åçš„åŒºåˆ«</h2><p>ç±»å‹åˆ«åä¸ç±»å‹å®šä¹‰è¡¨é¢ä¸Šçœ‹åªæœ‰ä¸€ä¸ªç­‰å·çš„å·®å¼‚ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„è¿™æ®µä»£ç æ¥ç†è§£å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚</p>
<pre><code class="go">//ç±»å‹å®šä¹‰
type NewInt int

//ç±»å‹åˆ«å
type MyInt = int

func main() &#123;
    var a NewInt
    var b MyInt

    fmt.Printf(&quot;type of a:%T\n&quot;, a) //type of a:main.NewInt		å¯ä»¥çœ‹åˆ°æ˜¯ä¸€ä¸ªå…¨æ–°çš„ç±»å‹
    fmt.Printf(&quot;type of b:%T\n&quot;, b) //type of b:int		åªæ˜¯ç»™intå–äº†åˆ«å
&#125;
</code></pre>
<p>ç»“æœæ˜¾ç¤ºaçš„ç±»å‹æ˜¯<code>main.NewInt</code>ï¼Œè¡¨ç¤ºmainåŒ…ä¸‹å®šä¹‰çš„<code>NewInt</code>ç±»å‹ã€‚bçš„ç±»å‹æ˜¯<code>int</code>ã€‚<code>MyInt</code>ç±»å‹åªä¼šåœ¨ä»£ç ä¸­å­˜åœ¨ï¼Œç¼–è¯‘å®Œæˆæ—¶å¹¶ä¸ä¼šæœ‰<code>MyInt</code>ç±»å‹ã€‚</p>
<h1 id="å-å®šä¹‰å£°æ˜ç»“æ„ä½“"><a href="#å-å®šä¹‰å£°æ˜ç»“æ„ä½“" class="headerlink" title="å å®šä¹‰å£°æ˜ç»“æ„ä½“"></a>å å®šä¹‰å£°æ˜ç»“æ„ä½“</h1><p>ç»“æ„ä½“å®šä¹‰éœ€è¦ä½¿ç”¨<code>type</code>å’Œ<code>struct</code>è¯­å¥ã€‚</p>
<ul>
<li><code>struct</code>è¯­å¥å®šä¹‰ä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹ï¼Œè¿™ä¸ªæ•°æ®ç±»å‹å°±æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œç»“æ„ä½“ä¸­æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œè¿™äº›æˆå‘˜æœ‰ä¸åŒçš„æ•°æ®ç±»å‹ç»„æˆã€‚</li>
</ul>
<p>ç»“æ„ä½“çš„æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="go">type ç±»å‹å struct&#123;
    //å¯ä»¥çœ‹å‡ºä¸éœ€è¦åŠ var
    å­—æ®µå å­—æ®µç±»å‹
    å­—æ®µå å­—æ®µç±»å‹
    ...
&#125;
// ç±»å‹åï¼šæ ‡è¯†è‡ªå®šä¹‰ç»“æ„ä½“çš„åç§°ï¼Œåœ¨åŒä¸€ä¸ªåŒ…å†…ä¸èƒ½é‡å¤,å°±ç±»ä¼¼ä¸intã€stringè¿™äº›ç±»å‹åã€‚
// å­—æ®µåï¼šè¡¨ç¤ºç»“æ„ä½“å†…çš„å±æ€§åã€‚ç»“æ„ä½“ä¸­çš„å­—æ®µåå¿…é¡»å”¯ä¸€ï¼Œç»“æ„ä½“ä¸­å­—æ®µå¤§å†™å¼€å¤´è¡¨ç¤ºå¯å…¬å¼€è®¿é—®ï¼Œå°å†™è¡¨ç¤ºç§æœ‰ï¼ˆä»…åœ¨å®šä¹‰å½“å‰ç»“æ„ä½“çš„åŒ…ä¸­å¯è®¿é—®ï¼‰
// å­—æ®µç±»å‹ï¼šè¡¨ç¤ºç»“æ„ä½“å†…å±æ€§å…·ä½“çš„ç±»å‹ã€‚
</code></pre>
<p>ä¾‹å­ï¼š</p>
<pre><code class="go">package main
import &quot;fmt&quot;
type Books struct &#123;
    title, author   string //æ ‡é¢˜ã€ä½œè€…ï¼Œå¯ä»¥çœ‹åˆ°è¯¥å®šä¹‰å¯ä»¥åƒå®šä¹‰å˜é‡è¯­è¨€å¤šä¸ªå®šä¹‰
    subject string //å­¦ç§‘
    book_id int    //ä¹¦ç±ID
&#125;
// ä¸Šé¢ç»“æ„ä½“çš„ç±»å‹åï¼šBooksï¼Œæœ‰titleã€ authorã€subjectã€book_idè¿™äº›å±æ€§
func main() &#123;
    //å˜é‡åˆ›å»ºä¸€ä¸ªç»“æ„ä½“
    Book1 := Books&#123;&quot;å‡å¦‚ç»™æˆ‘ä¸‰å¤©å…‰æ˜&quot;, &quot;æµ·ä¼¦å‡¯å‹’&quot;, &quot;æ–‡å­¦&quot;, 1&#125;
    fmt.Println(Book1)
    //ç›´æ¥è¾“å‡ºåˆ›å»ºä¸€ä¸ªç»“æ„ä½“
    fmt.Println(Books&#123;&quot;å‡å¦‚ç»™æˆ‘ä¸‰å¤©å…‰æ˜&quot;, &quot;æµ·ä¼¦å‡¯å‹’&quot;, &quot;æ–‡å­¦&quot;, 1&#125;)
    //ä½¿ç”¨ key =&gt; value æ ¼å¼
    fmt.Println(Books&#123;title: &quot;å‡å¦‚ç»™æˆ‘ä¸‰å¤©å…‰æ˜&quot;, author: &quot;æµ·ä¼¦å‡¯å‹’&quot;, subject: &quot;æ–‡å­¦&quot;, book_id: 1&#125;)
    //å¿½ç•¥çš„å­—æ®µä¸º 0 æˆ– ç©º
    fmt.Println(Books&#123;title: &quot;å‡å¦‚ç»™æˆ‘ä¸‰å¤©å…‰æ˜&quot;&#125;)
&#125;
</code></pre>
<p><img src="/images/Go%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/08e66b6cc1fb0b93f62d64b619a8e897.png" alt="08e66b6cc1fb0b93f62d64b619a8e897.png"></p>
<h1 id="è‚†-ç»“æ„ä½“å®ä¾‹åŒ–ä¸è®¿é—®ç»“æ„ä½“æˆå‘˜"><a href="#è‚†-ç»“æ„ä½“å®ä¾‹åŒ–ä¸è®¿é—®ç»“æ„ä½“æˆå‘˜" class="headerlink" title="è‚† ç»“æ„ä½“å®ä¾‹åŒ–ä¸è®¿é—®ç»“æ„ä½“æˆå‘˜"></a>è‚† ç»“æ„ä½“å®ä¾‹åŒ–ä¸è®¿é—®ç»“æ„ä½“æˆå‘˜</h1><h2 id="4-1-å®ä¾‹åŒ–ä¸è®¿é—®ç»“æ„ä½“æˆå‘˜"><a href="#4-1-å®ä¾‹åŒ–ä¸è®¿é—®ç»“æ„ä½“æˆå‘˜" class="headerlink" title="4.1 å®ä¾‹åŒ–ä¸è®¿é—®ç»“æ„ä½“æˆå‘˜"></a>4.1 å®ä¾‹åŒ–ä¸è®¿é—®ç»“æ„ä½“æˆå‘˜</h2><ul>
<li><p>ç»“æ„ä½“å®ä¾‹åŒ–<br>åŒæ ·ç»“æ„ä½“ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·éœ€è¦å®ä¾‹åŒ–ï¼Œæ‰èƒ½åˆ†é…å†…å­˜ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»å®ä¾‹åŒ–åæ‰èƒ½ä½¿ç”¨ç»“æ„ä½“çš„å­—æ®µã€‚ç”±äºç»“æ„ä½“æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åƒä¹‹å‰å£°æ˜å†…ç½®ç±»å‹ä¸€æ ·ä½¿ç”¨<code>var</code>å…³é”®å­—å£°æ˜ç»“æ„ä½“ç±»å‹ã€‚</p>
<pre><code class="go">var ç»“æ„ä½“å®ä¾‹ ç»“æ„ä½“ç±»å‹
</code></pre>
</li>
<li><p>è®¿é—®ç»“æ„ä½“æˆå‘˜<br>å¦‚æœè¦è®¿é—®ç»“æ„ä½“æˆå‘˜ï¼Œéœ€è¦ä½¿ç”¨ç‚¹å·<code>.</code>æ“ä½œç¬¦ï¼Œæ ¼å¼ä¸ºï¼š</p>
<pre><code class="go">ç»“æ„ä½“.æˆå‘˜å
</code></pre>
</li>
</ul>
<h2 id="4-2-åŸºæœ¬å®ä¾‹åŒ–"><a href="#4-2-åŸºæœ¬å®ä¾‹åŒ–" class="headerlink" title="4.2 åŸºæœ¬å®ä¾‹åŒ–"></a>4.2 åŸºæœ¬å®ä¾‹åŒ–</h2><pre><code class="go">package main

import &quot;fmt&quot;

type person struct &#123;
    name, city string
    age		int8
&#125;
func main() &#123;
    var p1 person
    p1.name = &quot;A7cc&quot;
    p1.city = &quot;ä¸­å›½&quot;
    p1.age = 18
    fmt.Printf(&quot;p1=%v\n&quot;, p1)  //p1=&#123;A7cc ä¸­å›½ 18&#125;
    fmt.Printf(&quot;p1=%#v\n&quot;, p1) //p1=main.person&#123;name:&quot;A7cc&quot;, city:&quot;ä¸­å›½&quot;, age:18&#125;
&#125;
</code></pre>
<h2 id="4-3-åŒ¿åç»“æ„ä½“"><a href="#4-3-åŒ¿åç»“æ„ä½“" class="headerlink" title="4.3 åŒ¿åç»“æ„ä½“"></a>4.3 åŒ¿åç»“æ„ä½“</h2><p>åœ¨å®šä¹‰ä¸€äº›ä¸´æ—¶æ•°æ®ç»“æ„ç­‰åœºæ™¯ä¸‹è¿˜å¯ä»¥ä½¿ç”¨åŒ¿åç»“æ„ä½“ã€‚</p>
<pre><code class="go">package main
import (
    &quot;fmt&quot;
)
func main() &#123;
    user := struct &#123;
        Name string
        Age  int
    &#125;&#123;
        &quot;A7cc&quot;,
        18,
    &#125;
    fmt.Printf(&quot;%#v\n&quot;, user) //struct &#123; Name string; Age int &#125;&#123;Name:&quot;A7cc&quot;, Age:18&#125;
&#125;
</code></pre>
<blockquote>
<p>å°çŸ¥è¯†ï¼š<br>æœ‰äº›é¡¹ç›®ä¼šæœ‰è¿™ç§æƒ…å†µï¼šstruct {}ã€struct {} {}<br>struct {}æ˜¯ä¸€ä¸ªæ— å…ƒç´ çš„ç»“æ„ä½“ç±»å‹ï¼Œé€šå¸¸åœ¨æ²¡æœ‰ä¿¡æ¯å­˜å‚¨æ—¶ä½¿ç”¨ã€‚ä¼˜ç‚¹æ˜¯å¤§å°ä¸º0ï¼Œä¸éœ€è¦å†…å­˜æ¥å­˜å‚¨struct {}ç±»å‹çš„å€¼ï¼Œæ³¨æ„æ˜¯æ²¡æœ‰æ²¡æœ‰å†…å­˜å­˜å‚¨<br>struct {} {}æ˜¯ä¸€ä¸ªå¤åˆå­—é¢é‡ï¼Œå®ƒæ„é€ äº†ä¸€ä¸ªstruct {}ç±»å‹çš„å€¼ï¼Œè¯¥å€¼ä¹Ÿæ˜¯ç©º<br>è¿™ç§å½¢å¼çš„ç»“æ„ä½“ä¸å æ®å†…å­˜ç©ºé—´ï¼Œå› æ­¤è¢«å¹¿æ³›ä½œä¸ºå„ç§åœºæ™¯ä¸‹çš„å ä½ç¬¦ä½¿ç”¨ã€‚ä¸€æ˜¯èŠ‚çœèµ„æºï¼ŒäºŒæ˜¯ç©ºç»“æ„ä½“æœ¬èº«å°±å…·å¤‡å¾ˆå¼ºçš„è¯­ä¹‰ï¼Œå³è¿™é‡Œä¸éœ€è¦ä»»ä½•å€¼ï¼Œä»…ä½œä¸ºå ä½ç¬¦ã€‚</p>
</blockquote>
<pre><code class="go">var set map[string]struct&#123;&#125; 
set = make(map[string]struct&#123;&#125;)

set[&quot;red&quot;] = struct&#123;&#125;&#123;&#125; // struct&#123;&#125;&#123;&#125;  æ„é€ äº†ä¸€ä¸ªstruct &#123;&#125;ç±»å‹çš„å€¼
set[&quot;blue&quot;] = struct&#123;&#125;&#123;&#125;

_, ok := set[&quot;red&quot;]
fmt.Println(&quot;Is red in the map?&quot;, ok)
_, ok = set[&quot;green&quot;]
fmt.Println(&quot;Is green in the map?&quot;, ok)
// Is red in the map? true
// Is green in the map? false
</code></pre>
<p><code>map</code>å¯ä»¥é€šè¿‡<code>comma ok</code>æœºåˆ¶æ¥è·å–è¯¥<code>key</code>æ˜¯å¦å­˜åœ¨<code>_, ok := map[&quot;key&quot;]</code>ï¼Œå¦‚æœæ²¡æœ‰å¯¹åº”çš„å€¼ï¼Œ<code>ok</code>ä¸º<code>false</code>ï¼Œè¿™æ ·å¯ä»¥é€šè¿‡å®šä¹‰æˆ<code>map[string]struct&#123;&#125;</code>çš„å½¢å¼ï¼Œå€¼ä¸å†å ç”¨å†…å­˜ã€‚å…¶å€¼ä»…æœ‰ä¸¤ç§çŠ¶æ€ï¼šæœ‰æˆ–æ— ã€‚</p>
<ul>
<li>å…¶ä»–çŸ¥è¯†ç‚¹<br><code>chan struct&#123;&#125;</code>ï¼šå¯ä»¥ç”¨ä½œé€šé“çš„é€€å‡º<br>ä¸¤ä¸ª<code>structt&#123;&#125;&#123;&#125;</code>åœ°å€ç›¸ç­‰</li>
</ul>
<h2 id="4-4-åˆ›å»ºæŒ‡é’ˆç±»å‹ç»“æ„ä½“"><a href="#4-4-åˆ›å»ºæŒ‡é’ˆç±»å‹ç»“æ„ä½“" class="headerlink" title="4.4 åˆ›å»ºæŒ‡é’ˆç±»å‹ç»“æ„ä½“"></a>4.4 åˆ›å»ºæŒ‡é’ˆç±»å‹ç»“æ„ä½“</h2><p>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨<code>new</code>å…³é”®å­—å¯¹ç»“æ„ä½“è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¾—åˆ°çš„æ˜¯ç»“æ„ä½“çš„åœ°å€ã€‚ æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="go">var p2 = new(person)
fmt.Printf(&quot;%T\n&quot;, p2)     //*main.person
fmt.Printf(&quot;p2=%#v\n&quot;, p2) //p2=&amp;main.person&#123;name:&quot;&quot;, city:&quot;&quot;, age:0&#125;
</code></pre>
<p>ä»æ‰“å°çš„ç»“æœä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡º<code>p2</code>æ˜¯ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆã€‚<font color="red">éœ€è¦æ³¨æ„çš„æ˜¯åœ¨Goè¯­è¨€ä¸­æ”¯æŒå¯¹ç»“æ„ä½“æŒ‡é’ˆç›´æ¥ä½¿ç”¨<code>.</code>æ¥è®¿é—®ç»“æ„ä½“çš„æˆå‘˜</font>ã€‚</p>
<pre><code class="go">var p2 = new(person)
p2.name = &quot;å°ç‹å­&quot;
p2.age = 28
p2.city = &quot;ä¸Šæµ·&quot;
fmt.Printf(&quot;p2=%#v\n&quot;, p2) //p2=&amp;main.person&#123;name:&quot;å°ç‹å­&quot;, city:&quot;ä¸Šæµ·&quot;, age:28&#125;
</code></pre>
<h2 id="4-5-å–ç»“æ„ä½“çš„åœ°å€å®ä¾‹åŒ–"><a href="#4-5-å–ç»“æ„ä½“çš„åœ°å€å®ä¾‹åŒ–" class="headerlink" title="4.5 å–ç»“æ„ä½“çš„åœ°å€å®ä¾‹åŒ–"></a>4.5 å–ç»“æ„ä½“çš„åœ°å€å®ä¾‹åŒ–</h2><p>ä½¿ç”¨<code>&amp;</code>å¯¹ç»“æ„ä½“è¿›è¡Œå–åœ°å€æ“ä½œç›¸å½“äºå¯¹è¯¥ç»“æ„ä½“ç±»å‹è¿›è¡Œäº†ä¸€æ¬¡<code>new</code>å®ä¾‹åŒ–æ“ä½œã€‚</p>
<pre><code class="go">p3 := &amp;person&#123;&#125;
fmt.Printf(&quot;%T\n&quot;, p3)     //*main.person
fmt.Printf(&quot;p3=%#v\n&quot;, p3) //p3=&amp;main.person&#123;name:&quot;&quot;, city:&quot;&quot;, age:0&#125;
p3.name = &quot;ä¸ƒç±³&quot;
p3.age = 30
p3.city = &quot;æˆéƒ½&quot;
fmt.Printf(&quot;p3=%#v\n&quot;, p3) //p3=&amp;main.person&#123;name:&quot;ä¸ƒç±³&quot;, city:&quot;æˆéƒ½&quot;, age:30&#125;
</code></pre>
<p><code>p3.name = &quot;ä¸ƒç±³&quot;</code>å…¶å®åœ¨åº•å±‚æ˜¯<code>(*p3).name = &quot;ä¸ƒç±³&quot;</code>ï¼Œè¿™æ˜¯Goè¯­è¨€å¸®æˆ‘ä»¬å®ç°çš„è¯­æ³•ç³–ã€‚</p>
<h1 id="ä¼-ç»“æ„ä½“åˆå§‹åŒ–"><a href="#ä¼-ç»“æ„ä½“åˆå§‹åŒ–" class="headerlink" title="ä¼ ç»“æ„ä½“åˆå§‹åŒ–"></a>ä¼ ç»“æ„ä½“åˆå§‹åŒ–</h1><p>æ²¡æœ‰åˆå§‹åŒ–çš„ç»“æ„ä½“ï¼Œå…¶æˆå‘˜å˜é‡éƒ½æ˜¯å¯¹åº”å…¶ç±»å‹çš„é›¶å€¼ã€‚</p>
<pre><code class="go">type person struct &#123;
    name string
    city string
    age  int8
&#125;
// è¿™ä¸ªç»“æ„ä½“ä¼šåœ¨ä¸‹é¢å°èŠ‚å»¶ç”¨

func main() &#123;
    var p4 person
    fmt.Printf(&quot;p4=%#v\n&quot;, p4) //p4=main.person&#123;name:&quot;&quot;, city:&quot;&quot;, age:0&#125;
&#125;
</code></pre>
<h2 id="5-1-ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–"><a href="#5-1-ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–" class="headerlink" title="5.1 ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–"></a>5.1 ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–</h2><p>ä½¿ç”¨é”®å€¼å¯¹å¯¹ç»“æ„ä½“è¿›è¡Œåˆå§‹åŒ–æ—¶ï¼Œé”®å¯¹åº”ç»“æ„ä½“çš„å­—æ®µï¼Œå€¼å¯¹åº”è¯¥å­—æ®µçš„åˆå§‹å€¼ã€‚</p>
<pre><code class="go">p5 := person&#123;
    name: &quot;A7cc&quot;,
    city: &quot;ä¸­å›½&quot;,
    age:  18,
    // åˆå§‹åŒ–æœ€åä¸€å®šè¦åŠ è‹±æ–‡çš„ , é€—å·
&#125;
fmt.Printf(&quot;p5=%#v\n&quot;, p5) //p5=main.person&#123;name:&quot;A7cc&quot;, city:&quot;ä¸­å›½&quot;, age:18&#125;
</code></pre>
<p>ä¹Ÿå¯ä»¥å¯¹ç»“æ„ä½“æŒ‡é’ˆè¿›è¡Œé”®å€¼å¯¹åˆå§‹åŒ–ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="go">p6 := &amp;person&#123;
    name: &quot;A7cc&quot;,
    city: &quot;ä¸­å›½&quot;,
    age:  18,
&#125;
fmt.Printf(&quot;p6=%#v\n&quot;, p6) //p6=&amp;main.person&#123;name:&quot;A7cc&quot;, city:&quot;ä¸­å›½&quot;, age:18&#125;
</code></pre>
<p>å½“æŸäº›å­—æ®µæ²¡æœ‰åˆå§‹å€¼çš„æ—¶å€™ï¼Œè¯¥å­—æ®µå¯ä»¥ä¸å†™ã€‚æ­¤æ—¶ï¼Œæ²¡æœ‰æŒ‡å®šåˆå§‹å€¼çš„å­—æ®µçš„å€¼å°±æ˜¯è¯¥å­—æ®µç±»å‹çš„é›¶å€¼ã€‚</p>
<pre><code class="go">p7 := &amp;person&#123;
    city: &quot;ä¸­å›½&quot;,
&#125;
fmt.Printf(&quot;p7=%#v\n&quot;, p7) //p7=&amp;main.person&#123;name:&quot;&quot;, city:&quot;ä¸­å›½&quot;, age:0&#125;
</code></pre>
<h2 id="5-2-ä½¿ç”¨å€¼çš„åˆ—è¡¨åˆå§‹åŒ–"><a href="#5-2-ä½¿ç”¨å€¼çš„åˆ—è¡¨åˆå§‹åŒ–" class="headerlink" title="5.2 ä½¿ç”¨å€¼çš„åˆ—è¡¨åˆå§‹åŒ–"></a>5.2 ä½¿ç”¨å€¼çš„åˆ—è¡¨åˆå§‹åŒ–</h2><p>åˆå§‹åŒ–ç»“æ„ä½“çš„æ—¶å€™å¯ä»¥ç®€å†™ï¼Œä¹Ÿå°±æ˜¯åˆå§‹åŒ–çš„æ—¶å€™ä¸å†™é”®ï¼Œç›´æ¥å†™å€¼ï¼š</p>
<pre><code class="go">// ä¹Ÿå¯ä»¥å¯¹ç»“æ„ä½“æŒ‡é’ˆè¿™æ ·å®šä¹‰
p8 := person&#123;
    &quot;A7cc&quot;,
    &quot;ä¸­å›½&quot;,
    18,
&#125;
fmt.Printf(&quot;p8=%#v\n&quot;, p8) //p8=main.person&#123;name:&quot;A7cc&quot;, city:&quot;ä¸­å›½&quot;, age:18&#125;
</code></pre>
<p>ä½¿ç”¨è¿™ç§æ ¼å¼åˆå§‹åŒ–æ—¶ï¼Œéœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>a.å¿…é¡»åˆå§‹åŒ–ç»“æ„ä½“çš„æ‰€æœ‰å­—æ®µã€‚</li>
<li>b.åˆå§‹å€¼çš„å¡«å……é¡ºåºå¿…é¡»ä¸å­—æ®µåœ¨ç»“æ„ä½“ä¸­çš„å£°æ˜é¡ºåºä¸€è‡´ã€‚</li>
<li>c.è¯¥æ–¹å¼ä¸èƒ½å’Œé”®å€¼åˆå§‹åŒ–æ–¹å¼æ··ç”¨ã€‚</li>
</ul>
<h2 id="5-3-ç»“æ„ä½“å†…å­˜å¸ƒå±€"><a href="#5-3-ç»“æ„ä½“å†…å­˜å¸ƒå±€" class="headerlink" title="5.3 ç»“æ„ä½“å†…å­˜å¸ƒå±€"></a>5.3 ç»“æ„ä½“å†…å­˜å¸ƒå±€</h2><p>ç»“æ„ä½“å ç”¨çš„æ˜¯ä¸€å—è¿ç»­çš„å†…å­˜ã€‚</p>
<pre><code class="go">type test struct &#123;
    a int8
    b int8
    c int8
    d int8
&#125;
n := test&#123;
    1, 2, 3, 4,
&#125;
fmt.Printf(&quot;n.a %p\n&quot;, &amp;n.a)	// n.a 0xc0000a0060
fmt.Printf(&quot;n.b %p\n&quot;, &amp;n.b)	// n.b 0xc0000a0061
fmt.Printf(&quot;n.c %p\n&quot;, &amp;n.c)	// n.c 0xc0000a0062
fmt.Printf(&quot;n.d %p\n&quot;, &amp;n.d)	// n.d 0xc0000a0063
</code></pre>
<p>ã€è¿›é˜¶çŸ¥è¯†ç‚¹ã€‘å…³äºGoè¯­è¨€ä¸­çš„å†…å­˜å¯¹é½æ¨èé˜…è¯»:<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000017527311?utm_campaign=studygolang.com&utm_medium=studygolang.com&utm_source=studygolang.com">åœ¨ Go ä¸­æ°åˆ°å¥½å¤„çš„å†…å­˜å¯¹é½</a></p>
<h2 id="5-4-ç©ºç»“æ„ä½“"><a href="#5-4-ç©ºç»“æ„ä½“" class="headerlink" title="5.4 ç©ºç»“æ„ä½“"></a>5.4 ç©ºç»“æ„ä½“</h2><p>ç©ºç»“æ„ä½“æ˜¯ä¸å ç”¨ç©ºé—´çš„ã€‚</p>
<pre><code class="go">var v struct&#123;&#125;
fmt.Println(unsafe.Sizeof(v))  // 0
</code></pre>
<h1 id="é™†-ç»“æ„ä½“æ ‡ç­¾ï¼ˆTagï¼‰"><a href="#é™†-ç»“æ„ä½“æ ‡ç­¾ï¼ˆTagï¼‰" class="headerlink" title="é™† ç»“æ„ä½“æ ‡ç­¾ï¼ˆTagï¼‰"></a>é™† ç»“æ„ä½“æ ‡ç­¾ï¼ˆTagï¼‰</h1><h2 id="6-1-structæˆå‘˜å˜é‡æ ‡ç­¾ï¼ˆTagï¼‰è¯´æ˜"><a href="#6-1-structæˆå‘˜å˜é‡æ ‡ç­¾ï¼ˆTagï¼‰è¯´æ˜" class="headerlink" title="6.1 structæˆå‘˜å˜é‡æ ‡ç­¾ï¼ˆTagï¼‰è¯´æ˜"></a>6.1 structæˆå‘˜å˜é‡æ ‡ç­¾ï¼ˆTagï¼‰è¯´æ˜</h2><p>åœ¨<code>golang</code>ä¸­ï¼Œå‘½åéƒ½æ˜¯æ¨èéƒ½æ˜¯ç”¨é©¼å³°æ–¹å¼ï¼Œå¹¶ä¸”åœ¨é¦–å­—æ¯å¤§å°å†™æœ‰ç‰¹æ®Šçš„è¯­æ³•å«ä¹‰ï¼šåŒ…å¤–æ— æ³•å¼•ç”¨ã€‚ä½†æ˜¯ç”±ç»å¸¸éœ€è¦å’Œå…¶å®ƒçš„ç³»ç»Ÿè¿›è¡Œæ•°æ®äº¤äº’ï¼Œä¾‹å¦‚è½¬æˆJSONæ ¼å¼ï¼Œå­˜å‚¨åˆ°<code>mongodb</code>ç­‰ç­‰ã€‚è¿™ä¸ªæ—¶å€™å¦‚æœç”¨å±æ€§åæ¥ä½œä¸ºé”®å€¼å¯èƒ½ä¸ä¸€å®šä¼šç¬¦åˆé¡¹ç›®è¦æ±‚ã€‚æ‰€ä»¥å°±å¤šäº†åå¼•å·çš„å†…å®¹ï¼Œåœ¨<code>golang</code>ä¸­å«æ ‡ç­¾ï¼ˆ<code>Tag</code>ï¼‰ï¼Œåœ¨è½¬æ¢æˆå…¶å®ƒæ•°æ®æ ¼å¼çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨å…¶ä¸­ç‰¹å®šçš„å­—æ®µä½œä¸ºé”®å€¼ã€‚</p>
<pre><code class="go">package main

import (
    &quot;encoding/json&quot;
    &quot;fmt&quot;
)

type User struct &#123;
    // Tagæ ‡ç­¾è¯´æ˜ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å…ƒç´ åé¢åŠ ä¸Š`json:&quot;è‡ªå®šä¹‰å±æ€§å&quot;`
    UserId   int    `json:&quot;user_id&quot; bson:&quot;user_id&quot;`
    UserName string `json:&quot;user_name&quot; bson:&quot;user_name&quot;`
&#125;

func main() &#123;
    u := &amp;User&#123;UserId: 1, UserName: &quot;tony&quot;&#125;
    j, _ := json.Marshal(u)
    fmt.Println(string(j))

    // è¾“å‡ºå†…å®¹ï¼š
    // &#123;&quot;user_id&quot;:1,&quot;user_name&quot;:&quot;tony&quot;&#125;
    // å¦‚æœåœ¨å±æ€§ä¸­ä¸å¢åŠ æ ‡ç­¾è¯´æ˜ï¼Œåˆ™è¾“å‡ºï¼š
    // &#123;&quot;UserId&quot;:1,&quot;UserName&quot;:&quot;tony&quot;&#125;
    // å¯ä»¥çœ‹åˆ°ç›´æ¥ç”¨structçš„å±æ€§ååšé”®å€¼ã€‚
    // ==å…¶ä¸­è¿˜æœ‰ä¸€ä¸ªbsonçš„å£°æ˜ï¼Œè¿™ä¸ªæ˜¯ç”¨åœ¨å°†æ•°æ®å­˜å‚¨åˆ°mongodbä½¿ç”¨çš„==
&#125;
</code></pre>
<h2 id="6-2-structæˆå‘˜å˜é‡æ ‡ç­¾ï¼ˆTagï¼‰è·å–"><a href="#6-2-structæˆå‘˜å˜é‡æ ‡ç­¾ï¼ˆTagï¼‰è·å–" class="headerlink" title="6.2 structæˆå‘˜å˜é‡æ ‡ç­¾ï¼ˆTagï¼‰è·å–"></a>6.2 structæˆå‘˜å˜é‡æ ‡ç­¾ï¼ˆTagï¼‰è·å–</h2><p>é‚£ä¹ˆå½“æˆ‘ä»¬éœ€è¦è‡ªå·±å°è£…ä¸€äº›æ“ä½œï¼Œéœ€è¦ç”¨åˆ°Tagä¸­çš„å†…å®¹æ—¶ï¼Œå’‹æ ·å»è·å–å‘¢ï¼Ÿè¿™è¾¹å¯ä»¥ä½¿ç”¨åå°„åŒ…<code>reflect</code>ä¸­çš„æ–¹æ³•æ¥è·å–ï¼š</p>
<pre><code class="go">package main

import (
    &quot;encoding/json&quot;
    &quot;fmt&quot;
    &quot;reflect&quot;
)

func main() &#123;
    type User struct &#123;
        UserId   int    `json:&quot;user_id&quot; bson:&quot;user_id&quot;`
        UserName string `json:&quot;user_name&quot; bson:&quot;user_name&quot;`
    &#125;
    // è¾“å‡ºjsonæ ¼å¼
    u := &amp;User&#123;UserId: 1, UserName: &quot;tony&quot;&#125;
    j, _ := json.Marshal(u)
    fmt.Println(string(j))
    // è¾“å‡ºå†…å®¹ï¼š&#123;&quot;user_id&quot;:1,&quot;user_name&quot;:&quot;tony&quot;&#125;

    // è·å–tagä¸­çš„å†…å®¹
    t := reflect.TypeOf(u)
    field := t.Elem().Field(0)
    fmt.Println(field.Tag.Get(&quot;json&quot;))
    // è¾“å‡ºï¼šuser_id
    fmt.Println(field.Tag.Get(&quot;bson&quot;))
    // è¾“å‡ºï¼šuser_id
&#125;
</code></pre>
<h2 id="6-3-è‡ªå®šä¹‰tag"><a href="#6-3-è‡ªå®šä¹‰tag" class="headerlink" title="6.3 è‡ªå®šä¹‰tag"></a>6.3 è‡ªå®šä¹‰tag</h2><p>æˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰Tagã€‚</p>
<pre><code class="go">// è·å–tagä¸­çš„å†…å®¹
typeof := reflect.TypeOf(u)
field := typeof.Elem().Field(0)
fmt.Println(field.Tag.Get(&quot;json&quot;))
// è¾“å‡ºï¼šuser_id
fmt.Println(field.Tag.Get(&quot;bson&quot;))
// è¾“å‡ºï¼šuser_id
fmt.Println(field.Tag.Get(&quot;test&quot;))
// è¾“å‡ºï¼štest
</code></pre>
<h2 id="6-4-omitemptyâ€”â€”å¯ä»¥å¿½ç•¥ä¸å¿…è¦çš„ä¿¡æ¯"><a href="#6-4-omitemptyâ€”â€”å¯ä»¥å¿½ç•¥ä¸å¿…è¦çš„ä¿¡æ¯" class="headerlink" title="6.4 omitemptyâ€”â€”å¯ä»¥å¿½ç•¥ä¸å¿…è¦çš„ä¿¡æ¯"></a>6.4 omitemptyâ€”â€”å¯ä»¥å¿½ç•¥ä¸å¿…è¦çš„ä¿¡æ¯</h2><h3 id="6-4-1-ä½¿ç”¨ä»‹ç»"><a href="#6-4-1-ä½¿ç”¨ä»‹ç»" class="headerlink" title="6.4.1 ä½¿ç”¨ä»‹ç»"></a>6.4.1 ä½¿ç”¨ä»‹ç»</h3><p>åœ¨ <code>Golang</code> çš„ç»“æ„ä½“å®šä¹‰ä¸­æ·»åŠ  <code>omitempty</code> å…³é”®å­—ï¼Œæ¥è¡¨ç¤ºä¸€æ¡ä¿¡æ¯å¦‚æœæ²¡æœ‰æä¾›ï¼Œåœ¨åºåˆ—åŒ–æˆ <code>JSON</code> çš„æ—¶å€™å°±ä¸è¦åŒ…å«å…¶é»˜è®¤å€¼ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="go">package main

import (
    &quot;encoding/json&quot;
    &quot;fmt&quot;
)

type address struct &#123;
    Street  string `json:&quot;street&quot;`  // è¡—é“
    Ste     string `json:&quot;suite&quot;`   // å•å…ƒï¼ˆå¯ä»¥ä¸å­˜åœ¨ï¼‰
    City    string `json:&quot;city&quot;`    // åŸå¸‚
    State   string `json:&quot;state&quot;`   // å·/çœ
    Zipcode string `json:&quot;zipcode&quot;` // é‚®ç¼–
&#125;

func main() &#123;
    data := `&#123;
    &quot;street&quot;: &quot;200 Larkin St&quot;,
    &quot;city&quot;: &quot;San Francisco&quot;,
    &quot;state&quot;: &quot;CA&quot;,
    &quot;zipcode&quot;: &quot;94102&quot;
&#125;`
    addr := new(address)
    json.Unmarshal([]byte(data), &amp;addr)

    // å¤„ç†äº†ä¸€ç•ª addr å˜é‡...

    addressBytes, _ := json.MarshalIndent(addr, &quot;&quot;, &quot;    &quot;)
    fmt.Printf(&quot;%s\n&quot;, string(addressBytes))
&#125;
</code></pre>
<p>è¾“å‡ºçš„æ˜¯ï¼š</p>
<pre><code class="go">&#123;
    &quot;street&quot;: &quot;200 Larkin St&quot;,
    &quot;suite&quot;: &quot;&quot;,
    &quot;city&quot;: &quot;San Francisco&quot;,
    &quot;state&quot;: &quot;CA&quot;,
    &quot;zipcode&quot;: &quot;94102&quot;
&#125;
</code></pre>
<p>å¤šäº†ä¸€è¡Œ <code>&quot;suite&quot;: &quot;&quot;</code>ï¼Œè€Œè¿™åˆ™ä¿¡æ¯åœ¨åŸæœ¬çš„ JSON æ•°æ®ä¸­æ˜¯æ²¡æœ‰çš„ï¼Œæˆ‘ä»¬æ›´å¸Œæœ›çš„æ˜¯ï¼Œåœ¨ä¸€ä¸ªåœ°å€æœ‰ <code>suite</code> å·ç çš„æ—¶å€™è¾“å‡ºï¼Œä¸å­˜åœ¨ <code>suite</code> çš„æ—¶å€™å°±ä¸è¾“å‡ºï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨<code>omitempty</code>å…³é”®å­—ã€‚ä¿®æ”¹ä¾‹å­ï¼š</p>
<pre><code class="go">package main

import (
    &quot;encoding/json&quot;
    &quot;fmt&quot;
)

type address struct &#123;
    Street  string `json:&quot;street&quot;`  // è¡—é“
    // åœ¨jsonå†…è¿½åŠ omitemptyå³å¯
    Ste     string `json:&quot;suite,omitempty&quot;`   // å•å…ƒ
    City    string `json:&quot;city&quot;`    // åŸå¸‚
    State   string `json:&quot;state&quot;`   // å·/çœ
    Zipcode string `json:&quot;zipcode&quot;` // é‚®ç¼–
&#125;

func main() &#123;
    data := `&#123;
    &quot;street&quot;: &quot;200 Larkin St&quot;,
    &quot;city&quot;: &quot;San Francisco&quot;,
    &quot;state&quot;: &quot;CA&quot;,
    &quot;zipcode&quot;: &quot;94102&quot;
&#125;`
    addr := new(address)
    json.Unmarshal([]byte(data), &amp;addr)

    // å¤„ç†äº†ä¸€ç•ª addr å˜é‡...

    addressBytes, _ := json.MarshalIndent(addr, &quot;&quot;, &quot;    &quot;)
    fmt.Printf(&quot;%s\n&quot;, string(addressBytes))
&#125;
// &#123;
//     &quot;street&quot;: &quot;200 Larkin St&quot;,
//     &quot;city&quot;: &quot;San Francisco&quot;,
//     &quot;state&quot;: &quot;CA&quot;,
//     &quot;zipcode&quot;: &quot;94102&quot;
// &#125;
</code></pre>
<h3 id="6-4-2-é™·é˜±"><a href="#6-4-2-é™·é˜±" class="headerlink" title="6.4.2 é™·é˜±"></a>6.4.2 é™·é˜±</h3><p>å¸¦æ¥æ–¹ä¾¿çš„åŒæ—¶ï¼Œä½¿ç”¨ <code>omitempty</code> ä¹Ÿæœ‰äº›å°é™·é˜±ã€‚</p>
<h4 id="6-4-2-1-å…³é”®å­—æ— æ³•å¿½ç•¥æ‰åµŒå¥—ç»“æ„ä½“"><a href="#6-4-2-1-å…³é”®å­—æ— æ³•å¿½ç•¥æ‰åµŒå¥—ç»“æ„ä½“" class="headerlink" title="6.4.2.1 å…³é”®å­—æ— æ³•å¿½ç•¥æ‰åµŒå¥—ç»“æ„ä½“"></a>6.4.2.1 å…³é”®å­—æ— æ³•å¿½ç•¥æ‰åµŒå¥—ç»“æ„ä½“</h4><p>è¿˜æ˜¯æ‹¿åœ°å€ç±»å‹è¯´äº‹ï¼Œè¿™å›æˆ‘ä»¬æƒ³è¦å¾€åœ°å€ç»“æ„ä½“ä¸­åŠ ä¸€ä¸ªæ–° <code>Coordinate</code> æ¥è¡¨ç¤ºç»çº¬åº¦ï¼Œå¦‚æœæ²¡æœ‰ç¼ºä¹ç›¸å…³çš„æ•°æ®ï¼Œæš‚æ—¶å¯ä»¥å¿½ç•¥ã€‚</p>
<pre><code class="go">type Address struct &#123;
    City       string     `json:&quot;city&quot;`
    Street     string     `json:&quot;street&quot;`
    ZipCode    string     `json:&quot;zip_code,omitempty&quot;`
    Coordinate coordinate `json:&quot;coordinate,omitempty&quot;`
&#125;

type coordinate struct &#123;
    Lat float64 `json:&quot;latitude&quot;`
    Lng float64 `json:&quot;longitude&quot;`
&#125;

func TestMarshal(t *testing.T) &#123;
    data := `&#123;
        &quot;city&quot;: &quot;Beijing&quot;,
        &quot;street&quot;: &quot;a&quot;
    &#125;`
    addr := &amp;Address&#123;&#125;
    json.Unmarshal([]byte(data), addr)

    addressBytes, _ := json.MarshalIndent(addr, &quot;&quot;, &quot;    &quot;)
    fmt.Printf(&quot;%s\n&quot;, string(addressBytes))
&#125;

// è¾“å‡ºæ˜¯ï¼š
// &#123;
//     &quot;city&quot;: &quot;Beijing&quot;,
//     &quot;street&quot;: &quot;a&quot;,
//     &quot;coordinate&quot;: &#123;
//         &quot;latitude&quot;: 0,
//         &quot;longitude&quot;: 0
//     &#125;
// &#125;
</code></pre>
<p>è¯»å…¥åŸæ¥çš„åœ°å€æ•°æ®ï¼Œå¤„ç†ååºåˆ—åŒ–è¾“å‡ºï¼Œæˆ‘ä»¬å°±ä¼šå‘ç°<strong>å³ä½¿åŠ ä¸Šäº† <code>omitempty</code> å…³é”®å­—ï¼Œè¾“å‡ºçš„ <code>JSON</code> è¿˜æ˜¯å¸¦ä¸Šäº†ä¸€ä¸ªç©ºçš„åæ ‡ä¿¡æ¯</strong>ã€‚ä¸ºäº†è¾¾åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œå¯ä»¥<strong>æŠŠåæ ‡å®šä¹‰ä¸ºæŒ‡é’ˆç±»å‹</strong>ï¼Œè¿™æ · <code>Golang</code> å°±èƒ½çŸ¥é“ä¸€ä¸ªæŒ‡é’ˆçš„ç©ºå€¼æ˜¯å¤šå°‘äº†ï¼Œå¦åˆ™é¢å¯¹ä¸€ä¸ªæˆ‘ä»¬è‡ªå®šä¹‰çš„ç»“æ„ï¼Œ <code>Golang</code> æ˜¯çŒœä¸å‡ºæˆ‘ä»¬æƒ³è¦çš„ç©ºå€¼çš„ã€‚äºæ˜¯æœ‰äº†å¦‚ä¸‹çš„ç»“æ„ä½“å®šä¹‰ï¼š</p>
<pre><code class="go">type address struct &#123;
    Street     string      `json:&quot;street&quot;`
    Ste        string      `json:&quot;suite,omitempty&quot;`
    City       string      `json:&quot;city&quot;`
    State      string      `json:&quot;state&quot;`
    Zipcode    string      `json:&quot;zipcode&quot;`
    Coordinate *coordinate `json:&quot;coordinate,omitempty&quot;`
&#125;

type coordinate struct &#123;
    Lat float64 `json:&quot;latitude&quot;`
    Lng float64 `json:&quot;longitude&quot;`
&#125;
// è¾“å‡ºæ˜¯ï¼š
// &#123;
//     &quot;street&quot;: &quot;200 Larkin St&quot;,
//     &quot;city&quot;: &quot;San Francisco&quot;,
//     &quot;state&quot;: &quot;CA&quot;,
//     &quot;zipcode&quot;: &quot;94102&quot;
// &#125;
</code></pre>
<h4 id="6-4-2-2-æƒ³è¦ä¼ å…¥é›¶å€¼"><a href="#6-4-2-2-æƒ³è¦ä¼ å…¥é›¶å€¼" class="headerlink" title="6.4.2.2 æƒ³è¦ä¼ å…¥é›¶å€¼"></a>6.4.2.2 æƒ³è¦ä¼ å…¥é›¶å€¼</h4><p>å¯¹äºç”¨ <code>omitempty</code> å®šä¹‰çš„ å­—æ®µ ï¼Œ<strong>å¦‚æœç»™å®ƒèµ‹çš„å€¼æ°å¥½ç­‰äºé»˜è®¤ç©ºå€¼çš„è¯</strong>ï¼Œåœ¨è½¬ä¸º json ä¹‹åä¹Ÿä¸ä¼šè¾“å‡ºè¿™ä¸ª å­—æ®µ ã€‚æ¯”å¦‚è¯´ä¸Šé¢å®šä¹‰çš„ç»çº¬åº¦åæ ‡ç»“æ„ä½“ï¼Œå¦‚æœæˆ‘ä»¬å°†ç»çº¬åº¦ä¸¤ä¸ª å­—æ®µ éƒ½åŠ ä¸Š <code>omitempty</code>ã€‚</p>
<pre><code class="go">type coordinate struct &#123;
    Lat float64 `json:&quot;latitude,omitempty&quot;`
    Lng float64 `json:&quot;longitude,omitempty&quot;`
&#125;

func TestMarshal(t *testing.T) &#123;
    data := `&#123;
        &quot;latitude&quot;: 1.0,
        &quot;longitude&quot;: 0.0
    &#125;`
    c := &amp;coordinate&#123;&#125;
    json.Unmarshal([]byte(data), c)
    fmt.Printf(&quot;%#v\n&quot;, c)

    addressBytes, _ := json.MarshalIndent(c, &quot;&quot;, &quot;    &quot;)
    fmt.Printf(&quot;%s\n&quot;, string(addressBytes))
&#125;

// &amp;omitempty.coordinate&#123;Lat:1, Lng:0&#125;
// &#123;
//     &quot;latitude&quot;: 1
// &#125;
</code></pre>
<p>è¿™ä¸ªåæ ‡çš„<code>longitude</code>æ¶ˆå¤±ä¸è§äº†ï¼ä½†æˆ‘ä»¬çš„è®¾æƒ³æ˜¯ï¼Œå¦‚æœä¸€ä¸ªåœ°ç‚¹æ²¡æœ‰ç»çº¬åº¦ä¿¡æ¯ï¼Œåˆ™æ‚¬ç©ºï¼Œè¿™æ²¡æœ‰é—®é¢˜ï¼Œä½†å¯¹äºåŸç‚¹åæ ‡ï¼Œæˆ‘ä»¬åœ¨ç¡®åˆ‡çŸ¥é“å®ƒçš„ç»çº¬åº¦çš„æƒ…å†µä¸‹ï¼Œ<code>0.0</code>ä»ç„¶è¢«å¿½ç•¥äº†ã€‚æ­£ç¡®çš„å†™æ³•ä¹Ÿæ˜¯å°†ç»“æ„ä½“å†…çš„å®šä¹‰æ”¹ä¸ºæŒ‡é’ˆï¼š</p>
<pre><code class="go">type coordinate struct &#123;
    Lat *float64 `json:&quot;latitude,omitempty&quot;`
    Lng *float64 `json:&quot;longitude,omitempty&quot;`
&#125;

// &amp;omitempty.coordinate&#123;Lat:(*float64)(0xc0000a6288), Lng:(*float64)(0xc0000a6298)&#125;
// &#123;
//     &quot;latitude&quot;: 1,
//     &quot;longitude&quot;: 0
// &#125;
</code></pre>
<p>è¿™æ ·ç©ºå€¼å°±ä» <code>float64</code> çš„ <code>0.0</code> å˜ä¸ºäº†æŒ‡é’ˆç±»å‹çš„ <code>nil</code> ï¼Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°æ­£ç¡®çš„ç»çº¬åº¦è¾“å‡ºã€‚</p>

    </div>
    
</div>
                         
<footer id="footer">
    <div class="footer-wrap">
        <div>
            Â© 2022 - 2022 å°Câ™¥å¤©å¤©
            <span class="footer-icon">
                <i class="fa-brands fa-github fa-fw"></i>
            </span>
            @å°C&å¤©å¤©
        </div>
        <div>
            å¤‡æ¡ˆå·ï¼šå°C&å¤©å¤©ã®çª
        </div>
    </div>
</footer>
                    </div>
                </div>
            </transition>
            <div id="img_show">
                <img id="img_content" alt="img_show">
            </div>
        </div>
        <script src="https://cdn.staticfile.org/highlight.js/11.5.1/highlight.min.js"></script>
        <script src="/js/particlex.js"></script>
        <script src="/js/showimg.js"></script>
        

        <!-- 3Dæ¨¡å‹ -->
        <div id="L2dCanvas" style="position: relative;"></div>
        <script src="/js/live2d.min.js"></script>
        <script src="/css/live2d.css"></script>
        <script>
            var v = new Viewer({
                basePath: "/model",
                role: "zhala_2",
                mobile: true,
            });
        </script>
        <!-- ç‚¹å‡» -->
        <script>
            let body = document.getElementsByTagName('body')[0];
            body.addEventListener('click', (e) => {
                let contentArr = ['âœŠ','ğŸ˜˜','ğŸ˜','ğŸ˜Š','ğŸ˜­','ğŸ˜¡','ğŸ˜‹','ğŸ‘','ğŸ·','ğŸ˜±','ğŸ’·','ğŸ’µ','Ã—','ğŸ†—','â„–','â­','ğŸŒ™','â™¥','ğŸ’´','â˜€','ğŸ','ğŸ‚','ğŸ','âˆš'];
                let randomNum = function (n) {
                    return Math.floor(Math.random() * n)
                }
                let span = document.createElement('span');
                span.innerHTML = `${contentArr[randomNum(contentArr.length)]}`;
                span.style.color = `rgb(${randomNum(256)},${randomNum(256)},${randomNum(256)})`;
                span.style.position = 'absolute';
                span.style.top = `${e.pageY}px`;
                span.style.left = `${e.pageX}px`;
                span.style.transition = 'all 1s ease';
                span.style.zIndex = 20000;
                body.appendChild(span)
                setTimeout(()=>{
                    span.style.top = span.offsetTop - 100 + 'px';
                    span.style.opacity = 0;
                    setTimeout(()=>{span.remove()},700)
                },0)
            })
        </script>
        <!-- æµæ˜ŸèƒŒæ™¯ç‰¹æ•ˆ -->
        <canvas id="background" style="position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:-1"></canvas>
        <script src="/js/background.js"></script>
    </body>
</html>